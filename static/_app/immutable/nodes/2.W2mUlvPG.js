import{s as nt,a as mt,x as me,u as _t,g as pt,b as bt,y as sl,z as $e,o as Yl,n as Ge,r as Pl,A as ol}from"../chunks/ClrtNR3q.js";import{S as rt,i as it,d as p,z as qn,k as j,l as V,A as fn,a as W,b as c,B as Al,e as S,q as dn,C as Dl,u as Ee,w as ke,x as Ie,v as Se,p as Ye,m as h,D as Kl,g as P,c as g,n as G,j as A,h as m,s as ie,E as Oe,f as L,t as R,o as Ke,F as hn,G as Mt,H as Gl}from"../chunks/BR-gbpPD.js";import{w as ot}from"../chunks/D6mTelph.js";function $t(o){return(o==null?void 0:o.length)!==void 0?o:Array.from(o)}function at(o,e){const t={},n={},l={$$scope:1};let s=o.length;for(;s--;){const r=o[s],i=e[s];if(i){for(const a in r)a in i||(n[a]=1);for(const a in i)l[a]||(t[a]=i[a],l[a]=1);o[s]=i}else for(const a in r)l[a]=1}for(const r in n)r in t||(t[r]=void 0);return t}function At(o){return typeof o=="object"&&o!==null?o:{}}/**
 * @license lucide-svelte v0.447.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rl={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":2,"stroke-linecap":"round","stroke-linejoin":"round"};function il(o,e,t){const n=o.slice();return n[11]=e[t][0],n[12]=e[t][1],n}function $n(o){let e,t=[o[12]],n={};for(let l=0;l<t.length;l+=1)n=me(n,t[l]);return{c(){e=Dl(o[11]),this.h()},l(l){e=Al(l,o[11],{}),S(e).forEach(p),this.h()},h(){fn(e,n)},m(l,s){W(l,e,s)},p(l,s){fn(e,n=at(t,[s&32&&l[12]]))},d(l){l&&p(e)}}}function al(o){let e=o[11],t,n=o[11]&&$n(o);return{c(){n&&n.c(),t=dn()},l(l){n&&n.l(l),t=dn()},m(l,s){n&&n.m(l,s),W(l,t,s)},p(l,s){l[11]?e?nt(e,l[11])?(n.d(1),n=$n(l),e=l[11],n.c(),n.m(t.parentNode,t)):n.p(l,s):(n=$n(l),e=l[11],n.c(),n.m(t.parentNode,t)):e&&(n.d(1),n=null,e=l[11])},d(l){l&&p(t),n&&n.d(l)}}}function Ql(o){let e,t,n,l,s,r=$t(o[5]),i=[];for(let d=0;d<r.length;d+=1)i[d]=al(il(o,r,d));const a=o[10].default,u=mt(a,o,o[9],null);let f=[rl,o[7],{width:o[2]},{height:o[2]},{stroke:o[1]},{"stroke-width":n=o[4]?Number(o[3])*24/Number(o[2]):o[3]},{class:l=o[6]("lucide-icon","lucide",o[0]?`lucide-${o[0]}`:"",o[8].class)}],w={};for(let d=0;d<f.length;d+=1)w=me(w,f[d]);return{c(){e=Dl("svg");for(let d=0;d<i.length;d+=1)i[d].c();t=dn(),u&&u.c(),this.h()},l(d){e=Al(d,"svg",{width:!0,height:!0,stroke:!0,"stroke-width":!0,class:!0});var v=S(e);for(let _=0;_<i.length;_+=1)i[_].l(v);t=dn(),u&&u.l(v),v.forEach(p),this.h()},h(){fn(e,w)},m(d,v){W(d,e,v);for(let _=0;_<i.length;_+=1)i[_]&&i[_].m(e,null);c(e,t),u&&u.m(e,null),s=!0},p(d,[v]){if(v&32){r=$t(d[5]);let _;for(_=0;_<r.length;_+=1){const I=il(d,r,_);i[_]?i[_].p(I,v):(i[_]=al(I),i[_].c(),i[_].m(e,t))}for(;_<i.length;_+=1)i[_].d(1);i.length=r.length}u&&u.p&&(!s||v&512)&&_t(u,a,d,d[9],s?bt(a,d[9],v,null):pt(d[9]),null),fn(e,w=at(f,[rl,v&128&&d[7],(!s||v&4)&&{width:d[2]},(!s||v&4)&&{height:d[2]},(!s||v&2)&&{stroke:d[1]},(!s||v&28&&n!==(n=d[4]?Number(d[3])*24/Number(d[2]):d[3]))&&{"stroke-width":n},(!s||v&257&&l!==(l=d[6]("lucide-icon","lucide",d[0]?`lucide-${d[0]}`:"",d[8].class)))&&{class:l}]))},i(d){s||(V(u,d),s=!0)},o(d){j(u,d),s=!1},d(d){d&&p(e),qn(i,d),u&&u.d(d)}}}function Wl(o,e,t){const n=["name","color","size","strokeWidth","absoluteStrokeWidth","iconNode"];let l=sl(e,n),{$$slots:s={},$$scope:r}=e,{name:i=void 0}=e,{color:a="currentColor"}=e,{size:u=24}=e,{strokeWidth:f=2}=e,{absoluteStrokeWidth:w=!1}=e,{iconNode:d=[]}=e;const v=(..._)=>_.filter((I,E,b)=>!!I&&b.indexOf(I)===E).join(" ");return o.$$set=_=>{t(8,e=me(me({},e),$e(_))),t(7,l=sl(e,n)),"name"in _&&t(0,i=_.name),"color"in _&&t(1,a=_.color),"size"in _&&t(2,u=_.size),"strokeWidth"in _&&t(3,f=_.strokeWidth),"absoluteStrokeWidth"in _&&t(4,w=_.absoluteStrokeWidth),"iconNode"in _&&t(5,d=_.iconNode),"$$scope"in _&&t(9,r=_.$$scope)},e=$e(e),[i,a,u,f,w,d,v,l,e,r,s]}class Dt extends rt{constructor(e){super(),it(this,e,Wl,Ql,nt,{name:0,color:1,size:2,strokeWidth:3,absoluteStrokeWidth:4,iconNode:5})}}function Zl(o){let e;const t=o[2].default,n=mt(t,o,o[3],null);return{c(){n&&n.c()},l(l){n&&n.l(l)},m(l,s){n&&n.m(l,s),e=!0},p(l,s){n&&n.p&&(!e||s&8)&&_t(n,t,l,l[3],e?bt(t,l[3],s,null):pt(l[3]),null)},i(l){e||(V(n,l),e=!0)},o(l){j(n,l),e=!1},d(l){n&&n.d(l)}}}function Xl(o){let e,t;const n=[{name:"circle-alert"},o[1],{iconNode:o[0]}];let l={$$slots:{default:[Zl]},$$scope:{ctx:o}};for(let s=0;s<n.length;s+=1)l=me(l,n[s]);return e=new Dt({props:l}),{c(){Se(e.$$.fragment)},l(s){Ie(e.$$.fragment,s)},m(s,r){ke(e,s,r),t=!0},p(s,[r]){const i=r&3?at(n,[n[0],r&2&&At(s[1]),r&1&&{iconNode:s[0]}]):{};r&8&&(i.$$scope={dirty:r,ctx:s}),e.$set(i)},i(s){t||(V(e.$$.fragment,s),t=!0)},o(s){j(e.$$.fragment,s),t=!1},d(s){Ee(e,s)}}}function es(o,e,t){let{$$slots:n={},$$scope:l}=e;const s=[["circle",{cx:"12",cy:"12",r:"10"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16"}]];return o.$$set=r=>{t(1,e=me(me({},e),$e(r))),"$$scope"in r&&t(3,l=r.$$scope)},e=$e(e),[s,e,n,l]}class ts extends rt{constructor(e){super(),it(this,e,es,Xl,nt,{})}}function ns(o){let e;const t=o[2].default,n=mt(t,o,o[3],null);return{c(){n&&n.c()},l(l){n&&n.l(l)},m(l,s){n&&n.m(l,s),e=!0},p(l,s){n&&n.p&&(!e||s&8)&&_t(n,t,l,l[3],e?bt(t,l[3],s,null):pt(l[3]),null)},i(l){e||(V(n,l),e=!0)},o(l){j(n,l),e=!1},d(l){n&&n.d(l)}}}function ls(o){let e,t;const n=[{name:"circle-check-big"},o[1],{iconNode:o[0]}];let l={$$slots:{default:[ns]},$$scope:{ctx:o}};for(let s=0;s<n.length;s+=1)l=me(l,n[s]);return e=new Dt({props:l}),{c(){Se(e.$$.fragment)},l(s){Ie(e.$$.fragment,s)},m(s,r){ke(e,s,r),t=!0},p(s,[r]){const i=r&3?at(n,[n[0],r&2&&At(s[1]),r&1&&{iconNode:s[0]}]):{};r&8&&(i.$$scope={dirty:r,ctx:s}),e.$set(i)},i(s){t||(V(e.$$.fragment,s),t=!0)},o(s){j(e.$$.fragment,s),t=!1},d(s){Ee(e,s)}}}function ss(o,e,t){let{$$slots:n={},$$scope:l}=e;const s=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335"}],["path",{d:"m9 11 3 3L22 4"}]];return o.$$set=r=>{t(1,e=me(me({},e),$e(r))),"$$scope"in r&&t(3,l=r.$$scope)},e=$e(e),[s,e,n,l]}class Jn extends rt{constructor(e){super(),it(this,e,ss,ls,nt,{})}}function os(o){let e;const t=o[2].default,n=mt(t,o,o[3],null);return{c(){n&&n.c()},l(l){n&&n.l(l)},m(l,s){n&&n.m(l,s),e=!0},p(l,s){n&&n.p&&(!e||s&8)&&_t(n,t,l,l[3],e?bt(t,l[3],s,null):pt(l[3]),null)},i(l){e||(V(n,l),e=!0)},o(l){j(n,l),e=!1},d(l){n&&n.d(l)}}}function rs(o){let e,t;const n=[{name:"clock"},o[1],{iconNode:o[0]}];let l={$$slots:{default:[os]},$$scope:{ctx:o}};for(let s=0;s<n.length;s+=1)l=me(l,n[s]);return e=new Dt({props:l}),{c(){Se(e.$$.fragment)},l(s){Ie(e.$$.fragment,s)},m(s,r){ke(e,s,r),t=!0},p(s,[r]){const i=r&3?at(n,[n[0],r&2&&At(s[1]),r&1&&{iconNode:s[0]}]):{};r&8&&(i.$$scope={dirty:r,ctx:s}),e.$set(i)},i(s){t||(V(e.$$.fragment,s),t=!0)},o(s){j(e.$$.fragment,s),t=!1},d(s){Ee(e,s)}}}function is(o,e,t){let{$$slots:n={},$$scope:l}=e;const s=[["circle",{cx:"12",cy:"12",r:"10"}],["polyline",{points:"12 6 12 12 16 14"}]];return o.$$set=r=>{t(1,e=me(me({},e),$e(r))),"$$scope"in r&&t(3,l=r.$$scope)},e=$e(e),[s,e,n,l]}class as extends rt{constructor(e){super(),it(this,e,is,rs,nt,{})}}function cs(o){let e;const t=o[2].default,n=mt(t,o,o[3],null);return{c(){n&&n.c()},l(l){n&&n.l(l)},m(l,s){n&&n.m(l,s),e=!0},p(l,s){n&&n.p&&(!e||s&8)&&_t(n,t,l,l[3],e?bt(t,l[3],s,null):pt(l[3]),null)},i(l){e||(V(n,l),e=!0)},o(l){j(n,l),e=!1},d(l){n&&n.d(l)}}}function us(o){let e,t;const n=[{name:"copy"},o[1],{iconNode:o[0]}];let l={$$slots:{default:[cs]},$$scope:{ctx:o}};for(let s=0;s<n.length;s+=1)l=me(l,n[s]);return e=new Dt({props:l}),{c(){Se(e.$$.fragment)},l(s){Ie(e.$$.fragment,s)},m(s,r){ke(e,s,r),t=!0},p(s,[r]){const i=r&3?at(n,[n[0],r&2&&At(s[1]),r&1&&{iconNode:s[0]}]):{};r&8&&(i.$$scope={dirty:r,ctx:s}),e.$set(i)},i(s){t||(V(e.$$.fragment,s),t=!0)},o(s){j(e.$$.fragment,s),t=!1},d(s){Ee(e,s)}}}function fs(o,e,t){let{$$slots:n={},$$scope:l}=e;const s=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"}]];return o.$$set=r=>{t(1,e=me(me({},e),$e(r))),"$$scope"in r&&t(3,l=r.$$scope)},e=$e(e),[s,e,n,l]}class ds extends rt{constructor(e){super(),it(this,e,fs,us,nt,{})}}function hs(o){let e;const t=o[2].default,n=mt(t,o,o[3],null);return{c(){n&&n.c()},l(l){n&&n.l(l)},m(l,s){n&&n.m(l,s),e=!0},p(l,s){n&&n.p&&(!e||s&8)&&_t(n,t,l,l[3],e?bt(t,l[3],s,null):pt(l[3]),null)},i(l){e||(V(n,l),e=!0)},o(l){j(n,l),e=!1},d(l){n&&n.d(l)}}}function gs(o){let e,t;const n=[{name:"qr-code"},o[1],{iconNode:o[0]}];let l={$$slots:{default:[hs]},$$scope:{ctx:o}};for(let s=0;s<n.length;s+=1)l=me(l,n[s]);return e=new Dt({props:l}),{c(){Se(e.$$.fragment)},l(s){Ie(e.$$.fragment,s)},m(s,r){ke(e,s,r),t=!0},p(s,[r]){const i=r&3?at(n,[n[0],r&2&&At(s[1]),r&1&&{iconNode:s[0]}]):{};r&8&&(i.$$scope={dirty:r,ctx:s}),e.$set(i)},i(s){t||(V(e.$$.fragment,s),t=!0)},o(s){j(e.$$.fragment,s),t=!1},d(s){Ee(e,s)}}}function ms(o,e,t){let{$$slots:n={},$$scope:l}=e;const s=[["rect",{width:"5",height:"5",x:"3",y:"3",rx:"1"}],["rect",{width:"5",height:"5",x:"16",y:"3",rx:"1"}],["rect",{width:"5",height:"5",x:"3",y:"16",rx:"1"}],["path",{d:"M21 16h-3a2 2 0 0 0-2 2v3"}],["path",{d:"M21 21v.01"}],["path",{d:"M12 7v3a2 2 0 0 1-2 2H7"}],["path",{d:"M3 12h.01"}],["path",{d:"M12 3h.01"}],["path",{d:"M12 16v.01"}],["path",{d:"M16 12h1"}],["path",{d:"M21 12v.01"}],["path",{d:"M12 21v-1"}]];return o.$$set=r=>{t(1,e=me(me({},e),$e(r))),"$$scope"in r&&t(3,l=r.$$scope)},e=$e(e),[s,e,n,l]}class _s extends rt{constructor(e){super(),it(this,e,ms,gs,nt,{})}}function ps(o){let e;const t=o[2].default,n=mt(t,o,o[3],null);return{c(){n&&n.c()},l(l){n&&n.l(l)},m(l,s){n&&n.m(l,s),e=!0},p(l,s){n&&n.p&&(!e||s&8)&&_t(n,t,l,l[3],e?bt(t,l[3],s,null):pt(l[3]),null)},i(l){e||(V(n,l),e=!0)},o(l){j(n,l),e=!1},d(l){n&&n.d(l)}}}function bs(o){let e,t;const n=[{name:"refresh-cw"},o[1],{iconNode:o[0]}];let l={$$slots:{default:[ps]},$$scope:{ctx:o}};for(let s=0;s<n.length;s+=1)l=me(l,n[s]);return e=new Dt({props:l}),{c(){Se(e.$$.fragment)},l(s){Ie(e.$$.fragment,s)},m(s,r){ke(e,s,r),t=!0},p(s,[r]){const i=r&3?at(n,[n[0],r&2&&At(s[1]),r&1&&{iconNode:s[0]}]):{};r&8&&(i.$$scope={dirty:r,ctx:s}),e.$set(i)},i(s){t||(V(e.$$.fragment,s),t=!0)},o(s){j(e.$$.fragment,s),t=!1},d(s){Ee(e,s)}}}function vs(o,e,t){let{$$slots:n={},$$scope:l}=e;const s=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8"}],["path",{d:"M21 3v5h-5"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16"}],["path",{d:"M8 16H3v5"}]];return o.$$set=r=>{t(1,e=me(me({},e),$e(r))),"$$scope"in r&&t(3,l=r.$$scope)},e=$e(e),[s,e,n,l]}class Jt extends rt{constructor(e){super(),it(this,e,vs,bs,nt,{})}}function Cs(o){let e;const t=o[2].default,n=mt(t,o,o[3],null);return{c(){n&&n.c()},l(l){n&&n.l(l)},m(l,s){n&&n.m(l,s),e=!0},p(l,s){n&&n.p&&(!e||s&8)&&_t(n,t,l,l[3],e?bt(t,l[3],s,null):pt(l[3]),null)},i(l){e||(V(n,l),e=!0)},o(l){j(n,l),e=!1},d(l){n&&n.d(l)}}}function ys(o){let e,t;const n=[{name:"send"},o[1],{iconNode:o[0]}];let l={$$slots:{default:[Cs]},$$scope:{ctx:o}};for(let s=0;s<n.length;s+=1)l=me(l,n[s]);return e=new Dt({props:l}),{c(){Se(e.$$.fragment)},l(s){Ie(e.$$.fragment,s)},m(s,r){ke(e,s,r),t=!0},p(s,[r]){const i=r&3?at(n,[n[0],r&2&&At(s[1]),r&1&&{iconNode:s[0]}]):{};r&8&&(i.$$scope={dirty:r,ctx:s}),e.$set(i)},i(s){t||(V(e.$$.fragment,s),t=!0)},o(s){j(e.$$.fragment,s),t=!1},d(s){Ee(e,s)}}}function ws(o,e,t){let{$$slots:n={},$$scope:l}=e;const s=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z"}],["path",{d:"m21.854 2.147-10.94 10.939"}]];return o.$$set=r=>{t(1,e=me(me({},e),$e(r))),"$$scope"in r&&t(3,l=r.$$scope)},e=$e(e),[s,e,n,l]}class Es extends rt{constructor(e){super(),it(this,e,ws,ys,nt,{})}}var Yt={},ks=function(){return typeof Promise=="function"&&Promise.prototype&&Promise.prototype.then},Bl={},je={};let Yn;const Is=[0,26,44,70,100,134,172,196,242,292,346,404,466,532,581,655,733,815,901,991,1085,1156,1258,1364,1474,1588,1706,1828,1921,2051,2185,2323,2465,2611,2761,2876,3034,3196,3362,3532,3706];je.getSymbolSize=function(e){if(!e)throw new Error('"version" cannot be null or undefined');if(e<1||e>40)throw new Error('"version" should be in range from 1 to 40');return e*4+17};je.getSymbolTotalCodewords=function(e){return Is[e]};je.getBCHDigit=function(o){let e=0;for(;o!==0;)e++,o>>>=1;return e};je.setToSJISFunction=function(e){if(typeof e!="function")throw new Error('"toSJISFunc" is not a valid function.');Yn=e};je.isKanjiModeEnabled=function(){return typeof Yn<"u"};je.toSJIS=function(e){return Yn(e)};var _n={};(function(o){o.L={bit:1},o.M={bit:0},o.Q={bit:3},o.H={bit:2};function e(t){if(typeof t!="string")throw new Error("Param is not a string");switch(t.toLowerCase()){case"l":case"low":return o.L;case"m":case"medium":return o.M;case"q":case"quartile":return o.Q;case"h":case"high":return o.H;default:throw new Error("Unknown EC Level: "+t)}}o.isValid=function(n){return n&&typeof n.bit<"u"&&n.bit>=0&&n.bit<4},o.from=function(n,l){if(o.isValid(n))return n;try{return e(n)}catch{return l}}})(_n);function Tl(){this.buffer=[],this.length=0}Tl.prototype={get:function(o){const e=Math.floor(o/8);return(this.buffer[e]>>>7-o%8&1)===1},put:function(o,e){for(let t=0;t<e;t++)this.putBit((o>>>e-t-1&1)===1)},getLengthInBits:function(){return this.length},putBit:function(o){const e=Math.floor(this.length/8);this.buffer.length<=e&&this.buffer.push(0),o&&(this.buffer[e]|=128>>>this.length%8),this.length++}};var Ss=Tl;function Kt(o){if(!o||o<1)throw new Error("BitMatrix size must be defined and greater than 0");this.size=o,this.data=new Uint8Array(o*o),this.reservedBit=new Uint8Array(o*o)}Kt.prototype.set=function(o,e,t,n){const l=o*this.size+e;this.data[l]=t,n&&(this.reservedBit[l]=!0)};Kt.prototype.get=function(o,e){return this.data[o*this.size+e]};Kt.prototype.xor=function(o,e,t){this.data[o*this.size+e]^=t};Kt.prototype.isReserved=function(o,e){return this.reservedBit[o*this.size+e]};var Ns=Kt,Ml={};(function(o){const e=je.getSymbolSize;o.getRowColCoords=function(n){if(n===1)return[];const l=Math.floor(n/7)+2,s=e(n),r=s===145?26:Math.ceil((s-13)/(2*l-2))*2,i=[s-7];for(let a=1;a<l-1;a++)i[a]=i[a-1]-r;return i.push(6),i.reverse()},o.getPositions=function(n){const l=[],s=o.getRowColCoords(n),r=s.length;for(let i=0;i<r;i++)for(let a=0;a<r;a++)i===0&&a===0||i===0&&a===r-1||i===r-1&&a===0||l.push([s[i],s[a]]);return l}})(Ml);var $l={};const Ps=je.getSymbolSize,cl=7;$l.getPositions=function(e){const t=Ps(e);return[[0,0],[t-cl,0],[0,t-cl]]};var Ll={};(function(o){o.Patterns={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};const e={N1:3,N2:3,N3:40,N4:10};o.isValid=function(l){return l!=null&&l!==""&&!isNaN(l)&&l>=0&&l<=7},o.from=function(l){return o.isValid(l)?parseInt(l,10):void 0},o.getPenaltyN1=function(l){const s=l.size;let r=0,i=0,a=0,u=null,f=null;for(let w=0;w<s;w++){i=a=0,u=f=null;for(let d=0;d<s;d++){let v=l.get(w,d);v===u?i++:(i>=5&&(r+=e.N1+(i-5)),u=v,i=1),v=l.get(d,w),v===f?a++:(a>=5&&(r+=e.N1+(a-5)),f=v,a=1)}i>=5&&(r+=e.N1+(i-5)),a>=5&&(r+=e.N1+(a-5))}return r},o.getPenaltyN2=function(l){const s=l.size;let r=0;for(let i=0;i<s-1;i++)for(let a=0;a<s-1;a++){const u=l.get(i,a)+l.get(i,a+1)+l.get(i+1,a)+l.get(i+1,a+1);(u===4||u===0)&&r++}return r*e.N2},o.getPenaltyN3=function(l){const s=l.size;let r=0,i=0,a=0;for(let u=0;u<s;u++){i=a=0;for(let f=0;f<s;f++)i=i<<1&2047|l.get(u,f),f>=10&&(i===1488||i===93)&&r++,a=a<<1&2047|l.get(f,u),f>=10&&(a===1488||a===93)&&r++}return r*e.N3},o.getPenaltyN4=function(l){let s=0;const r=l.data.length;for(let a=0;a<r;a++)s+=l.data[a];return Math.abs(Math.ceil(s*100/r/5)-10)*e.N4};function t(n,l,s){switch(n){case o.Patterns.PATTERN000:return(l+s)%2===0;case o.Patterns.PATTERN001:return l%2===0;case o.Patterns.PATTERN010:return s%3===0;case o.Patterns.PATTERN011:return(l+s)%3===0;case o.Patterns.PATTERN100:return(Math.floor(l/2)+Math.floor(s/3))%2===0;case o.Patterns.PATTERN101:return l*s%2+l*s%3===0;case o.Patterns.PATTERN110:return(l*s%2+l*s%3)%2===0;case o.Patterns.PATTERN111:return(l*s%3+(l+s)%2)%2===0;default:throw new Error("bad maskPattern:"+n)}}o.applyMask=function(l,s){const r=s.size;for(let i=0;i<r;i++)for(let a=0;a<r;a++)s.isReserved(a,i)||s.xor(a,i,t(l,a,i))},o.getBestMask=function(l,s){const r=Object.keys(o.Patterns).length;let i=0,a=1/0;for(let u=0;u<r;u++){s(u),o.applyMask(u,l);const f=o.getPenaltyN1(l)+o.getPenaltyN2(l)+o.getPenaltyN3(l)+o.getPenaltyN4(l);o.applyMask(u,l),f<a&&(a=f,i=u)}return i}})(Ll);var pn={};const gt=_n,cn=[1,1,1,1,1,1,1,1,1,1,2,2,1,2,2,4,1,2,4,4,2,4,4,4,2,4,6,5,2,4,6,6,2,5,8,8,4,5,8,8,4,5,8,11,4,8,10,11,4,9,12,16,4,9,16,16,6,10,12,18,6,10,17,16,6,11,16,19,6,13,18,21,7,14,21,25,8,16,20,25,8,17,23,25,9,17,23,34,9,18,25,30,10,20,27,32,12,21,29,35,12,23,34,37,12,25,34,40,13,26,35,42,14,28,38,45,15,29,40,48,16,31,43,51,17,33,45,54,18,35,48,57,19,37,51,60,19,38,53,63,20,40,56,66,21,43,59,70,22,45,62,74,24,47,65,77,25,49,68,81],un=[7,10,13,17,10,16,22,28,15,26,36,44,20,36,52,64,26,48,72,88,36,64,96,112,40,72,108,130,48,88,132,156,60,110,160,192,72,130,192,224,80,150,224,264,96,176,260,308,104,198,288,352,120,216,320,384,132,240,360,432,144,280,408,480,168,308,448,532,180,338,504,588,196,364,546,650,224,416,600,700,224,442,644,750,252,476,690,816,270,504,750,900,300,560,810,960,312,588,870,1050,336,644,952,1110,360,700,1020,1200,390,728,1050,1260,420,784,1140,1350,450,812,1200,1440,480,868,1290,1530,510,924,1350,1620,540,980,1440,1710,570,1036,1530,1800,570,1064,1590,1890,600,1120,1680,1980,630,1204,1770,2100,660,1260,1860,2220,720,1316,1950,2310,750,1372,2040,2430];pn.getBlocksCount=function(e,t){switch(t){case gt.L:return cn[(e-1)*4+0];case gt.M:return cn[(e-1)*4+1];case gt.Q:return cn[(e-1)*4+2];case gt.H:return cn[(e-1)*4+3];default:return}};pn.getTotalCodewordsCount=function(e,t){switch(t){case gt.L:return un[(e-1)*4+0];case gt.M:return un[(e-1)*4+1];case gt.Q:return un[(e-1)*4+2];case gt.H:return un[(e-1)*4+3];default:return}};var Rl={},bn={};const Ht=new Uint8Array(512),gn=new Uint8Array(256);(function(){let e=1;for(let t=0;t<255;t++)Ht[t]=e,gn[e]=t,e<<=1,e&256&&(e^=285);for(let t=255;t<512;t++)Ht[t]=Ht[t-255]})();bn.log=function(e){if(e<1)throw new Error("log("+e+")");return gn[e]};bn.exp=function(e){return Ht[e]};bn.mul=function(e,t){return e===0||t===0?0:Ht[gn[e]+gn[t]]};(function(o){const e=bn;o.mul=function(n,l){const s=new Uint8Array(n.length+l.length-1);for(let r=0;r<n.length;r++)for(let i=0;i<l.length;i++)s[r+i]^=e.mul(n[r],l[i]);return s},o.mod=function(n,l){let s=new Uint8Array(n);for(;s.length-l.length>=0;){const r=s[0];for(let a=0;a<l.length;a++)s[a]^=e.mul(l[a],r);let i=0;for(;i<s.length&&s[i]===0;)i++;s=s.slice(i)}return s},o.generateECPolynomial=function(n){let l=new Uint8Array([1]);for(let s=0;s<n;s++)l=o.mul(l,new Uint8Array([1,e.exp(s)]));return l}})(Rl);const Vl=Rl;function Kn(o){this.genPoly=void 0,this.degree=o,this.degree&&this.initialize(this.degree)}Kn.prototype.initialize=function(e){this.degree=e,this.genPoly=Vl.generateECPolynomial(this.degree)};Kn.prototype.encode=function(e){if(!this.genPoly)throw new Error("Encoder not initialized");const t=new Uint8Array(e.length+this.degree);t.set(e);const n=Vl.mod(t,this.genPoly),l=this.degree-n.length;if(l>0){const s=new Uint8Array(this.degree);return s.set(n,l),s}return n};var As=Kn,xl={},vt={},Gn={};Gn.isValid=function(e){return!isNaN(e)&&e>=1&&e<=40};var lt={};const Ul="[0-9]+",Ds="[A-Z $%*+\\-./:]+";let qt="(?:[u3000-u303F]|[u3040-u309F]|[u30A0-u30FF]|[uFF00-uFFEF]|[u4E00-u9FAF]|[u2605-u2606]|[u2190-u2195]|u203B|[u2010u2015u2018u2019u2025u2026u201Cu201Du2225u2260]|[u0391-u0451]|[u00A7u00A8u00B1u00B4u00D7u00F7])+";qt=qt.replace(/u/g,"\\u");const Bs="(?:(?![A-Z0-9 $%*+\\-./:]|"+qt+`)(?:.|[\r
]))+`;lt.KANJI=new RegExp(qt,"g");lt.BYTE_KANJI=new RegExp("[^A-Z0-9 $%*+\\-./:]+","g");lt.BYTE=new RegExp(Bs,"g");lt.NUMERIC=new RegExp(Ul,"g");lt.ALPHANUMERIC=new RegExp(Ds,"g");const Ts=new RegExp("^"+qt+"$"),Ms=new RegExp("^"+Ul+"$"),$s=new RegExp("^[A-Z0-9 $%*+\\-./:]+$");lt.testKanji=function(e){return Ts.test(e)};lt.testNumeric=function(e){return Ms.test(e)};lt.testAlphanumeric=function(e){return $s.test(e)};(function(o){const e=Gn,t=lt;o.NUMERIC={id:"Numeric",bit:1,ccBits:[10,12,14]},o.ALPHANUMERIC={id:"Alphanumeric",bit:2,ccBits:[9,11,13]},o.BYTE={id:"Byte",bit:4,ccBits:[8,16,16]},o.KANJI={id:"Kanji",bit:8,ccBits:[8,10,12]},o.MIXED={bit:-1},o.getCharCountIndicator=function(s,r){if(!s.ccBits)throw new Error("Invalid mode: "+s);if(!e.isValid(r))throw new Error("Invalid version: "+r);return r>=1&&r<10?s.ccBits[0]:r<27?s.ccBits[1]:s.ccBits[2]},o.getBestModeForData=function(s){return t.testNumeric(s)?o.NUMERIC:t.testAlphanumeric(s)?o.ALPHANUMERIC:t.testKanji(s)?o.KANJI:o.BYTE},o.toString=function(s){if(s&&s.id)return s.id;throw new Error("Invalid mode")},o.isValid=function(s){return s&&s.bit&&s.ccBits};function n(l){if(typeof l!="string")throw new Error("Param is not a string");switch(l.toLowerCase()){case"numeric":return o.NUMERIC;case"alphanumeric":return o.ALPHANUMERIC;case"kanji":return o.KANJI;case"byte":return o.BYTE;default:throw new Error("Unknown mode: "+l)}}o.from=function(s,r){if(o.isValid(s))return s;try{return n(s)}catch{return r}}})(vt);(function(o){const e=je,t=pn,n=_n,l=vt,s=Gn,r=7973,i=e.getBCHDigit(r);function a(d,v,_){for(let I=1;I<=40;I++)if(v<=o.getCapacity(I,_,d))return I}function u(d,v){return l.getCharCountIndicator(d,v)+4}function f(d,v){let _=0;return d.forEach(function(I){const E=u(I.mode,v);_+=E+I.getBitsLength()}),_}function w(d,v){for(let _=1;_<=40;_++)if(f(d,_)<=o.getCapacity(_,v,l.MIXED))return _}o.from=function(v,_){return s.isValid(v)?parseInt(v,10):_},o.getCapacity=function(v,_,I){if(!s.isValid(v))throw new Error("Invalid QR Code version");typeof I>"u"&&(I=l.BYTE);const E=e.getSymbolTotalCodewords(v),b=t.getTotalCodewordsCount(v,_),C=(E-b)*8;if(I===l.MIXED)return C;const y=C-u(I,v);switch(I){case l.NUMERIC:return Math.floor(y/10*3);case l.ALPHANUMERIC:return Math.floor(y/11*2);case l.KANJI:return Math.floor(y/13);case l.BYTE:default:return Math.floor(y/8)}},o.getBestVersionForData=function(v,_){let I;const E=n.from(_,n.M);if(Array.isArray(v)){if(v.length>1)return w(v,E);if(v.length===0)return 1;I=v[0]}else I=v;return a(I.mode,I.getLength(),E)},o.getEncodedBits=function(v){if(!s.isValid(v)||v<7)throw new Error("Invalid QR Code version");let _=v<<12;for(;e.getBCHDigit(_)-i>=0;)_^=r<<e.getBCHDigit(_)-i;return v<<12|_}})(xl);var Fl={};const zn=je,zl=1335,Ls=21522,ul=zn.getBCHDigit(zl);Fl.getEncodedBits=function(e,t){const n=e.bit<<3|t;let l=n<<10;for(;zn.getBCHDigit(l)-ul>=0;)l^=zl<<zn.getBCHDigit(l)-ul;return(n<<10|l)^Ls};var Ol={};const Rs=vt;function Lt(o){this.mode=Rs.NUMERIC,this.data=o.toString()}Lt.getBitsLength=function(e){return 10*Math.floor(e/3)+(e%3?e%3*3+1:0)};Lt.prototype.getLength=function(){return this.data.length};Lt.prototype.getBitsLength=function(){return Lt.getBitsLength(this.data.length)};Lt.prototype.write=function(e){let t,n,l;for(t=0;t+3<=this.data.length;t+=3)n=this.data.substr(t,3),l=parseInt(n,10),e.put(l,10);const s=this.data.length-t;s>0&&(n=this.data.substr(t),l=parseInt(n,10),e.put(l,s*3+1))};var Vs=Lt;const xs=vt,Ln=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];function Rt(o){this.mode=xs.ALPHANUMERIC,this.data=o}Rt.getBitsLength=function(e){return 11*Math.floor(e/2)+6*(e%2)};Rt.prototype.getLength=function(){return this.data.length};Rt.prototype.getBitsLength=function(){return Rt.getBitsLength(this.data.length)};Rt.prototype.write=function(e){let t;for(t=0;t+2<=this.data.length;t+=2){let n=Ln.indexOf(this.data[t])*45;n+=Ln.indexOf(this.data[t+1]),e.put(n,11)}this.data.length%2&&e.put(Ln.indexOf(this.data[t]),6)};var Us=Rt;const Fs=vt;function Vt(o){this.mode=Fs.BYTE,typeof o=="string"?this.data=new TextEncoder().encode(o):this.data=new Uint8Array(o)}Vt.getBitsLength=function(e){return e*8};Vt.prototype.getLength=function(){return this.data.length};Vt.prototype.getBitsLength=function(){return Vt.getBitsLength(this.data.length)};Vt.prototype.write=function(o){for(let e=0,t=this.data.length;e<t;e++)o.put(this.data[e],8)};var zs=Vt;const Os=vt,js=je;function xt(o){this.mode=Os.KANJI,this.data=o}xt.getBitsLength=function(e){return e*13};xt.prototype.getLength=function(){return this.data.length};xt.prototype.getBitsLength=function(){return xt.getBitsLength(this.data.length)};xt.prototype.write=function(o){let e;for(e=0;e<this.data.length;e++){let t=js.toSJIS(this.data[e]);if(t>=33088&&t<=40956)t-=33088;else if(t>=57408&&t<=60351)t-=49472;else throw new Error("Invalid SJIS character: "+this.data[e]+`
Make sure your charset is UTF-8`);t=(t>>>8&255)*192+(t&255),o.put(t,13)}};var Hs=xt,jl={exports:{}};(function(o){var e={single_source_shortest_paths:function(t,n,l){var s={},r={};r[n]=0;var i=e.PriorityQueue.make();i.push(n,0);for(var a,u,f,w,d,v,_,I,E;!i.empty();){a=i.pop(),u=a.value,w=a.cost,d=t[u]||{};for(f in d)d.hasOwnProperty(f)&&(v=d[f],_=w+v,I=r[f],E=typeof r[f]>"u",(E||I>_)&&(r[f]=_,i.push(f,_),s[f]=u))}if(typeof l<"u"&&typeof r[l]>"u"){var b=["Could not find a path from ",n," to ",l,"."].join("");throw new Error(b)}return s},extract_shortest_path_from_predecessor_list:function(t,n){for(var l=[],s=n;s;)l.push(s),t[s],s=t[s];return l.reverse(),l},find_path:function(t,n,l){var s=e.single_source_shortest_paths(t,n,l);return e.extract_shortest_path_from_predecessor_list(s,l)},PriorityQueue:{make:function(t){var n=e.PriorityQueue,l={},s;t=t||{};for(s in n)n.hasOwnProperty(s)&&(l[s]=n[s]);return l.queue=[],l.sorter=t.sorter||n.default_sorter,l},default_sorter:function(t,n){return t.cost-n.cost},push:function(t,n){var l={value:t,cost:n};this.queue.push(l),this.queue.sort(this.sorter)},pop:function(){return this.queue.shift()},empty:function(){return this.queue.length===0}}};o.exports=e})(jl);var qs=jl.exports;(function(o){const e=vt,t=Vs,n=Us,l=zs,s=Hs,r=lt,i=je,a=qs;function u(b){return unescape(encodeURIComponent(b)).length}function f(b,C,y){const N=[];let T;for(;(T=b.exec(y))!==null;)N.push({data:T[0],index:T.index,mode:C,length:T[0].length});return N}function w(b){const C=f(r.NUMERIC,e.NUMERIC,b),y=f(r.ALPHANUMERIC,e.ALPHANUMERIC,b);let N,T;return i.isKanjiModeEnabled()?(N=f(r.BYTE,e.BYTE,b),T=f(r.KANJI,e.KANJI,b)):(N=f(r.BYTE_KANJI,e.BYTE,b),T=[]),C.concat(y,N,T).sort(function(B,Y){return B.index-Y.index}).map(function(B){return{data:B.data,mode:B.mode,length:B.length}})}function d(b,C){switch(C){case e.NUMERIC:return t.getBitsLength(b);case e.ALPHANUMERIC:return n.getBitsLength(b);case e.KANJI:return s.getBitsLength(b);case e.BYTE:return l.getBitsLength(b)}}function v(b){return b.reduce(function(C,y){const N=C.length-1>=0?C[C.length-1]:null;return N&&N.mode===y.mode?(C[C.length-1].data+=y.data,C):(C.push(y),C)},[])}function _(b){const C=[];for(let y=0;y<b.length;y++){const N=b[y];switch(N.mode){case e.NUMERIC:C.push([N,{data:N.data,mode:e.ALPHANUMERIC,length:N.length},{data:N.data,mode:e.BYTE,length:N.length}]);break;case e.ALPHANUMERIC:C.push([N,{data:N.data,mode:e.BYTE,length:N.length}]);break;case e.KANJI:C.push([N,{data:N.data,mode:e.BYTE,length:u(N.data)}]);break;case e.BYTE:C.push([{data:N.data,mode:e.BYTE,length:u(N.data)}])}}return C}function I(b,C){const y={},N={start:{}};let T=["start"];for(let D=0;D<b.length;D++){const B=b[D],Y=[];for(let z=0;z<B.length;z++){const $=B[z],O=""+D+z;Y.push(O),y[O]={node:$,lastCount:0},N[O]={};for(let H=0;H<T.length;H++){const U=T[H];y[U]&&y[U].node.mode===$.mode?(N[U][O]=d(y[U].lastCount+$.length,$.mode)-d(y[U].lastCount,$.mode),y[U].lastCount+=$.length):(y[U]&&(y[U].lastCount=$.length),N[U][O]=d($.length,$.mode)+4+e.getCharCountIndicator($.mode,C))}}T=Y}for(let D=0;D<T.length;D++)N[T[D]].end=0;return{map:N,table:y}}function E(b,C){let y;const N=e.getBestModeForData(b);if(y=e.from(C,N),y!==e.BYTE&&y.bit<N.bit)throw new Error('"'+b+'" cannot be encoded with mode '+e.toString(y)+`.
 Suggested mode is: `+e.toString(N));switch(y===e.KANJI&&!i.isKanjiModeEnabled()&&(y=e.BYTE),y){case e.NUMERIC:return new t(b);case e.ALPHANUMERIC:return new n(b);case e.KANJI:return new s(b);case e.BYTE:return new l(b)}}o.fromArray=function(C){return C.reduce(function(y,N){return typeof N=="string"?y.push(E(N,null)):N.data&&y.push(E(N.data,N.mode)),y},[])},o.fromString=function(C,y){const N=w(C,i.isKanjiModeEnabled()),T=_(N),D=I(T,y),B=a.find_path(D.map,"start","end"),Y=[];for(let z=1;z<B.length-1;z++)Y.push(D.table[B[z]].node);return o.fromArray(v(Y))},o.rawSplit=function(C){return o.fromArray(w(C,i.isKanjiModeEnabled()))}})(Ol);const vn=je,Rn=_n,Js=Ss,Ys=Ns,Ks=Ml,Gs=$l,On=Ll,jn=pn,Qs=As,mn=xl,Ws=Fl,Zs=vt,Vn=Ol;function Xs(o,e){const t=o.size,n=Gs.getPositions(e);for(let l=0;l<n.length;l++){const s=n[l][0],r=n[l][1];for(let i=-1;i<=7;i++)if(!(s+i<=-1||t<=s+i))for(let a=-1;a<=7;a++)r+a<=-1||t<=r+a||(i>=0&&i<=6&&(a===0||a===6)||a>=0&&a<=6&&(i===0||i===6)||i>=2&&i<=4&&a>=2&&a<=4?o.set(s+i,r+a,!0,!0):o.set(s+i,r+a,!1,!0))}}function eo(o){const e=o.size;for(let t=8;t<e-8;t++){const n=t%2===0;o.set(t,6,n,!0),o.set(6,t,n,!0)}}function to(o,e){const t=Ks.getPositions(e);for(let n=0;n<t.length;n++){const l=t[n][0],s=t[n][1];for(let r=-2;r<=2;r++)for(let i=-2;i<=2;i++)r===-2||r===2||i===-2||i===2||r===0&&i===0?o.set(l+r,s+i,!0,!0):o.set(l+r,s+i,!1,!0)}}function no(o,e){const t=o.size,n=mn.getEncodedBits(e);let l,s,r;for(let i=0;i<18;i++)l=Math.floor(i/3),s=i%3+t-8-3,r=(n>>i&1)===1,o.set(l,s,r,!0),o.set(s,l,r,!0)}function xn(o,e,t){const n=o.size,l=Ws.getEncodedBits(e,t);let s,r;for(s=0;s<15;s++)r=(l>>s&1)===1,s<6?o.set(s,8,r,!0):s<8?o.set(s+1,8,r,!0):o.set(n-15+s,8,r,!0),s<8?o.set(8,n-s-1,r,!0):s<9?o.set(8,15-s-1+1,r,!0):o.set(8,15-s-1,r,!0);o.set(n-8,8,1,!0)}function lo(o,e){const t=o.size;let n=-1,l=t-1,s=7,r=0;for(let i=t-1;i>0;i-=2)for(i===6&&i--;;){for(let a=0;a<2;a++)if(!o.isReserved(l,i-a)){let u=!1;r<e.length&&(u=(e[r]>>>s&1)===1),o.set(l,i-a,u),s--,s===-1&&(r++,s=7)}if(l+=n,l<0||t<=l){l-=n,n=-n;break}}}function so(o,e,t){const n=new Js;t.forEach(function(a){n.put(a.mode.bit,4),n.put(a.getLength(),Zs.getCharCountIndicator(a.mode,o)),a.write(n)});const l=vn.getSymbolTotalCodewords(o),s=jn.getTotalCodewordsCount(o,e),r=(l-s)*8;for(n.getLengthInBits()+4<=r&&n.put(0,4);n.getLengthInBits()%8!==0;)n.putBit(0);const i=(r-n.getLengthInBits())/8;for(let a=0;a<i;a++)n.put(a%2?17:236,8);return oo(n,o,e)}function oo(o,e,t){const n=vn.getSymbolTotalCodewords(e),l=jn.getTotalCodewordsCount(e,t),s=n-l,r=jn.getBlocksCount(e,t),i=n%r,a=r-i,u=Math.floor(n/r),f=Math.floor(s/r),w=f+1,d=u-f,v=new Qs(d);let _=0;const I=new Array(r),E=new Array(r);let b=0;const C=new Uint8Array(o.buffer);for(let B=0;B<r;B++){const Y=B<a?f:w;I[B]=C.slice(_,_+Y),E[B]=v.encode(I[B]),_+=Y,b=Math.max(b,Y)}const y=new Uint8Array(n);let N=0,T,D;for(T=0;T<b;T++)for(D=0;D<r;D++)T<I[D].length&&(y[N++]=I[D][T]);for(T=0;T<d;T++)for(D=0;D<r;D++)y[N++]=E[D][T];return y}function ro(o,e,t,n){let l;if(Array.isArray(o))l=Vn.fromArray(o);else if(typeof o=="string"){let u=e;if(!u){const f=Vn.rawSplit(o);u=mn.getBestVersionForData(f,t)}l=Vn.fromString(o,u||40)}else throw new Error("Invalid data");const s=mn.getBestVersionForData(l,t);if(!s)throw new Error("The amount of data is too big to be stored in a QR Code");if(!e)e=s;else if(e<s)throw new Error(`
The chosen QR Code version cannot contain this amount of data.
Minimum version required to store current data is: `+s+`.
`);const r=so(e,t,l),i=vn.getSymbolSize(e),a=new Ys(i);return Xs(a,e),eo(a),to(a,e),xn(a,t,0),e>=7&&no(a,e),lo(a,r),isNaN(n)&&(n=On.getBestMask(a,xn.bind(null,a,t))),On.applyMask(n,a),xn(a,t,n),{modules:a,version:e,errorCorrectionLevel:t,maskPattern:n,segments:l}}Bl.create=function(e,t){if(typeof e>"u"||e==="")throw new Error("No input text");let n=Rn.M,l,s;return typeof t<"u"&&(n=Rn.from(t.errorCorrectionLevel,Rn.M),l=mn.from(t.version),s=On.from(t.maskPattern),t.toSJISFunc&&vn.setToSJISFunction(t.toSJISFunc)),ro(e,l,n,s)};var Hl={},Qn={};(function(o){function e(t){if(typeof t=="number"&&(t=t.toString()),typeof t!="string")throw new Error("Color should be defined as hex string");let n=t.slice().replace("#","").split("");if(n.length<3||n.length===5||n.length>8)throw new Error("Invalid hex color: "+t);(n.length===3||n.length===4)&&(n=Array.prototype.concat.apply([],n.map(function(s){return[s,s]}))),n.length===6&&n.push("F","F");const l=parseInt(n.join(""),16);return{r:l>>24&255,g:l>>16&255,b:l>>8&255,a:l&255,hex:"#"+n.slice(0,6).join("")}}o.getOptions=function(n){n||(n={}),n.color||(n.color={});const l=typeof n.margin>"u"||n.margin===null||n.margin<0?4:n.margin,s=n.width&&n.width>=21?n.width:void 0,r=n.scale||4;return{width:s,scale:s?4:r,margin:l,color:{dark:e(n.color.dark||"#000000ff"),light:e(n.color.light||"#ffffffff")},type:n.type,rendererOpts:n.rendererOpts||{}}},o.getScale=function(n,l){return l.width&&l.width>=n+l.margin*2?l.width/(n+l.margin*2):l.scale},o.getImageWidth=function(n,l){const s=o.getScale(n,l);return Math.floor((n+l.margin*2)*s)},o.qrToImageData=function(n,l,s){const r=l.modules.size,i=l.modules.data,a=o.getScale(r,s),u=Math.floor((r+s.margin*2)*a),f=s.margin*a,w=[s.color.light,s.color.dark];for(let d=0;d<u;d++)for(let v=0;v<u;v++){let _=(d*u+v)*4,I=s.color.light;if(d>=f&&v>=f&&d<u-f&&v<u-f){const E=Math.floor((d-f)/a),b=Math.floor((v-f)/a);I=w[i[E*r+b]?1:0]}n[_++]=I.r,n[_++]=I.g,n[_++]=I.b,n[_]=I.a}}})(Qn);(function(o){const e=Qn;function t(l,s,r){l.clearRect(0,0,s.width,s.height),s.style||(s.style={}),s.height=r,s.width=r,s.style.height=r+"px",s.style.width=r+"px"}function n(){try{return document.createElement("canvas")}catch{throw new Error("You need to specify a canvas element")}}o.render=function(s,r,i){let a=i,u=r;typeof a>"u"&&(!r||!r.getContext)&&(a=r,r=void 0),r||(u=n()),a=e.getOptions(a);const f=e.getImageWidth(s.modules.size,a),w=u.getContext("2d"),d=w.createImageData(f,f);return e.qrToImageData(d.data,s,a),t(w,u,f),w.putImageData(d,0,0),u},o.renderToDataURL=function(s,r,i){let a=i;typeof a>"u"&&(!r||!r.getContext)&&(a=r,r=void 0),a||(a={});const u=o.render(s,r,a),f=a.type||"image/png",w=a.rendererOpts||{};return u.toDataURL(f,w.quality)}})(Hl);var ql={};const io=Qn;function fl(o,e){const t=o.a/255,n=e+'="'+o.hex+'"';return t<1?n+" "+e+'-opacity="'+t.toFixed(2).slice(1)+'"':n}function Un(o,e,t){let n=o+e;return typeof t<"u"&&(n+=" "+t),n}function ao(o,e,t){let n="",l=0,s=!1,r=0;for(let i=0;i<o.length;i++){const a=Math.floor(i%e),u=Math.floor(i/e);!a&&!s&&(s=!0),o[i]?(r++,i>0&&a>0&&o[i-1]||(n+=s?Un("M",a+t,.5+u+t):Un("m",l,0),l=0,s=!1),a+1<e&&o[i+1]||(n+=Un("h",r),r=0)):l++}return n}ql.render=function(e,t,n){const l=io.getOptions(t),s=e.modules.size,r=e.modules.data,i=s+l.margin*2,a=l.color.light.a?"<path "+fl(l.color.light,"fill")+' d="M0 0h'+i+"v"+i+'H0z"/>':"",u="<path "+fl(l.color.dark,"stroke")+' d="'+ao(r,s,l.margin)+'"/>',f='viewBox="0 0 '+i+" "+i+'"',d='<svg xmlns="http://www.w3.org/2000/svg" '+(l.width?'width="'+l.width+'" height="'+l.width+'" ':"")+f+' shape-rendering="crispEdges">'+a+u+`</svg>
`;return typeof n=="function"&&n(null,d),d};const co=ks,Hn=Bl,Jl=Hl,uo=ql;function Wn(o,e,t,n,l){const s=[].slice.call(arguments,1),r=s.length,i=typeof s[r-1]=="function";if(!i&&!co())throw new Error("Callback required as last argument");if(i){if(r<2)throw new Error("Too few arguments provided");r===2?(l=t,t=e,e=n=void 0):r===3&&(e.getContext&&typeof l>"u"?(l=n,n=void 0):(l=n,n=t,t=e,e=void 0))}else{if(r<1)throw new Error("Too few arguments provided");return r===1?(t=e,e=n=void 0):r===2&&!e.getContext&&(n=t,t=e,e=void 0),new Promise(function(a,u){try{const f=Hn.create(t,n);a(o(f,e,n))}catch(f){u(f)}})}try{const a=Hn.create(t,n);l(null,o(a,e,n))}catch(a){l(a)}}Yt.create=Hn.create;Yt.toCanvas=Wn.bind(null,Jl.render);Yt.toDataURL=Wn.bind(null,Jl.renderToDataURL);Yt.toString=Wn.bind(null,function(o,e,t){return uo.render(o,t)});function Fn(o){var l,s,r,i,a,u,f,w,d,v,_,I;const e=o.slice(),t=((s=(l=e[3].payment)==null?void 0:l.bolt11)==null?void 0:s.invoice)||((i=(r=e[3].payment)==null?void 0:r.bolt11)==null?void 0:i.bolt11_invoice)||((a=e[3].payment)==null?void 0:a.bolt11_invoice)||e[3].bolt11_invoice||((u=e[3].payment)==null?void 0:u.invoice);e[40]=t;const n=((w=(f=e[3].payment)==null?void 0:f.bolt11)==null?void 0:w.order_total_sat)||((v=(d=e[3].payment)==null?void 0:d.bolt11)==null?void 0:v.amount_sat)||((_=e[3].payment)==null?void 0:_.amount_sat)||((I=e[3].payment)==null?void 0:I.amount);return e[41]=n,e}function dl(o,e,t){const n=o.slice();return n[42]=e[t],n}function hl(o,e,t){const n=o.slice();return n[45]=e[t],n}function fo(o){let e,t,n,l,s="Initializing session...",r;return t=new Jt({props:{class:"h-4 w-4 text-yellow-500 animate-spin"}}),{c(){e=m("div"),Se(t.$$.fragment),n=A(),l=m("p"),l.textContent=s,this.h()},l(i){e=g(i,"DIV",{class:!0});var a=S(e);Ie(t.$$.fragment,a),n=P(a),l=g(a,"P",{class:!0,"data-svelte-h":!0}),G(l)!=="svelte-1f0y55x"&&(l.textContent=s),a.forEach(p),this.h()},h(){h(l,"class","text-yellow-700 dark:text-yellow-300 text-sm"),h(e,"class","bg-yellow-500/10 border border-yellow-500/20 rounded-md p-3 mb-6 flex items-center gap-2")},m(i,a){W(i,e,a),ke(t,e,null),c(e,n),c(e,l),r=!0},p:Ge,i(i){r||(V(t.$$.fragment,i),r=!0)},o(i){j(t.$$.fragment,i),r=!1},d(i){i&&p(e),Ee(t)}}}function ho(o){let e,t,n,l,s,r,i=o[8].sessionId.slice(0,8)+"",a,u,f,w,d="New Session",v,_,I;return n=new Jn({props:{class:"h-4 w-4 text-green-500"}}),{c(){e=m("div"),t=m("div"),Se(n.$$.fragment),l=A(),s=m("p"),r=R("Session active (ID: "),a=R(i),u=R("...)"),f=A(),w=m("button"),w.textContent=d,this.h()},l(E){e=g(E,"DIV",{class:!0});var b=S(e);t=g(b,"DIV",{class:!0});var C=S(t);Ie(n.$$.fragment,C),l=P(C),s=g(C,"P",{class:!0});var y=S(s);r=L(y,"Session active (ID: "),a=L(y,i),u=L(y,"...)"),y.forEach(p),C.forEach(p),f=P(b),w=g(b,"BUTTON",{class:!0,"data-svelte-h":!0}),G(w)!=="svelte-158ztfs"&&(w.textContent=d),b.forEach(p),this.h()},h(){h(s,"class","text-green-700 dark:text-green-300 text-sm"),h(t,"class","flex items-center gap-2"),h(w,"class","text-xs px-2 py-1 border border-green-500/30 rounded hover:bg-green-500/10 text-green-700 dark:text-green-300"),h(e,"class","bg-green-500/10 border border-green-500/20 rounded-md p-3 mb-6 flex items-center justify-between")},m(E,b){W(E,e,b),c(e,t),ke(n,t,null),c(t,l),c(t,s),c(s,r),c(s,a),c(s,u),c(e,f),c(e,w),v=!0,_||(I=Oe(w,"click",o[17]),_=!0)},p(E,b){(!v||b[0]&256)&&i!==(i=E[8].sessionId.slice(0,8)+"")&&ie(a,i)},i(E){v||(V(n.$$.fragment,E),v=!0)},o(E){j(n.$$.fragment,E),v=!1},d(E){E&&p(e),Ee(n),_=!1,I()}}}function gl(o){let e,t,n,l,s,r;return t=new ts({props:{class:"h-4 w-4 text-destructive"}}),{c(){e=m("div"),Se(t.$$.fragment),n=A(),l=m("p"),s=R(o[6]),this.h()},l(i){e=g(i,"DIV",{class:!0});var a=S(e);Ie(t.$$.fragment,a),n=P(a),l=g(a,"P",{class:!0});var u=S(l);s=L(u,o[6]),u.forEach(p),a.forEach(p),this.h()},h(){h(l,"class","text-destructive text-sm"),h(e,"class","bg-destructive/10 border border-destructive/20 rounded-md p-4 mb-6 flex items-center gap-2")},m(i,a){W(i,e,a),ke(t,e,null),c(e,n),c(e,l),c(l,s),r=!0},p(i,a){(!r||a[0]&64)&&ie(s,i[6])},i(i){r||(V(t.$$.fragment,i),r=!0)},o(i){j(t.$$.fragment,i),r=!1},d(i){i&&p(e),Ee(t)}}}function go(o){let e,t;return{c(){e=m("div"),this.h()},l(n){e=g(n,"DIV",{class:!0}),S(e).forEach(p),this.h()},h(){h(e,"class",t="w-12 h-0.5 "+(o[7]>o[45]?"bg-primary":"bg-muted-foreground/30"))},m(n,l){W(n,e,l)},p(n,l){l[0]&128&&t!==(t="w-12 h-0.5 "+(n[7]>n[45]?"bg-primary":"bg-muted-foreground/30"))&&h(e,"class",t)},d(n){n&&p(e)}}}function ml(o){let e,t,n,l,s,r,i=o[45]<4&&go(o);return{c(){e=m("div"),t=m("div"),n=R(o[45]),s=A(),i&&i.c(),r=A(),this.h()},l(a){e=g(a,"DIV",{class:!0});var u=S(e);t=g(u,"DIV",{class:!0});var f=S(t);n=L(f,o[45]),f.forEach(p),s=P(u),i&&i.l(u),r=P(u),u.forEach(p),this.h()},h(){h(t,"class",l="flex items-center justify-center w-8 h-8 rounded-full border-2 "+(o[7]>=o[45]?"bg-primary text-primary-foreground border-primary":"border-muted-foreground text-muted-foreground")),h(e,"class","flex items-center")},m(a,u){W(a,e,u),c(e,t),c(t,n),c(e,s),i&&i.m(e,null),c(e,r)},p(a,u){u[0]&128&&l!==(l="flex items-center justify-center w-8 h-8 rounded-full border-2 "+(a[7]>=a[45]?"bg-primary text-primary-foreground border-primary":"border-muted-foreground text-muted-foreground"))&&h(t,"class",l),a[45]<4&&i.p(a,u)},d(a){a&&p(e),i&&i.d()}}}function _l(o){let e,t,n,l="Step 1: Select an LSP",s,r,i,a,u,f,w,d,v,_;i=new Jt({props:{class:"h-4 w-4 "+(o[5]?"animate-spin":"")}});const I=[po,_o,mo],E=[];function b(C,y){return C[5]?0:C[0].length===0?1:2}return f=b(o),w=E[f]=I[f](o),{c(){e=m("div"),t=m("div"),n=m("h2"),n.textContent=l,s=A(),r=m("button"),Se(i.$$.fragment),a=R(`
					Refresh`),u=A(),w.c(),this.h()},l(C){e=g(C,"DIV",{class:!0});var y=S(e);t=g(y,"DIV",{class:!0});var N=S(t);n=g(N,"H2",{class:!0,"data-svelte-h":!0}),G(n)!=="svelte-q8pjy5"&&(n.textContent=l),s=P(N),r=g(N,"BUTTON",{class:!0});var T=S(r);Ie(i.$$.fragment,T),a=L(T,`
					Refresh`),T.forEach(p),N.forEach(p),u=P(y),w.l(y),y.forEach(p),this.h()},h(){h(n,"class","text-xl font-semibold"),r.disabled=o[5],h(r,"class","flex items-center gap-2 px-3 py-1.5 bg-background border rounded-md hover:bg-accent transition-colors disabled:opacity-50"),h(t,"class","flex items-center justify-between mb-4"),h(e,"class","bg-secondary/50 rounded-xl border p-6")},m(C,y){W(C,e,y),c(e,t),c(t,n),c(t,s),c(t,r),ke(i,r,null),c(r,a),c(e,u),E[f].m(e,null),d=!0,v||(_=Oe(r,"click",o[11]),v=!0)},p(C,y){const N={};y[0]&32&&(N.class="h-4 w-4 "+(C[5]?"animate-spin":"")),i.$set(N),(!d||y[0]&32)&&(r.disabled=C[5]);let T=f;f=b(C),f===T?E[f].p(C,y):(Ke(),j(E[T],1,1,()=>{E[T]=null}),Ye(),w=E[f],w?w.p(C,y):(w=E[f]=I[f](C),w.c()),V(w,1),w.m(e,null))},i(C){d||(V(i.$$.fragment,C),V(w),d=!0)},o(C){j(i.$$.fragment,C),j(w),d=!1},d(C){C&&p(e),Ee(i),E[f].d(),v=!1,_()}}}function mo(o){let e,t=$t(o[0]),n=[];for(let l=0;l<t.length;l+=1)n[l]=bl(dl(o,t,l));return{c(){e=m("div");for(let l=0;l<n.length;l+=1)n[l].c();this.h()},l(l){e=g(l,"DIV",{class:!0});var s=S(e);for(let r=0;r<n.length;r+=1)n[r].l(s);s.forEach(p),this.h()},h(){h(e,"class","grid gap-4")},m(l,s){W(l,e,s);for(let r=0;r<n.length;r+=1)n[r]&&n[r].m(e,null)},p(l,s){if(s[0]&4097){t=$t(l[0]);let r;for(r=0;r<t.length;r+=1){const i=dl(l,t,r);n[r]?n[r].p(i,s):(n[r]=bl(i),n[r].c(),n[r].m(e,null))}for(;r<n.length;r+=1)n[r].d(1);n.length=t.length}},i:Ge,o:Ge,d(l){l&&p(e),qn(n,l)}}}function _o(o){let e,t,n="No LSP advertisements found.",l,s,r="Try Again",i,a;return{c(){e=m("div"),t=m("p"),t.textContent=n,l=A(),s=m("button"),s.textContent=r,this.h()},l(u){e=g(u,"DIV",{class:!0});var f=S(e);t=g(f,"P",{class:!0,"data-svelte-h":!0}),G(t)!=="svelte-1omyzk6"&&(t.textContent=n),l=P(f),s=g(f,"BUTTON",{class:!0,"data-svelte-h":!0}),G(s)!=="svelte-9ncf3x"&&(s.textContent=r),f.forEach(p),this.h()},h(){h(t,"class","text-muted-foreground"),h(s,"class","mt-4 px-4 py-2 bg-primary text-primary-foreground rounded-md hover:bg-primary/90 transition-colors"),h(e,"class","text-center py-12")},m(u,f){W(u,e,f),c(e,t),c(e,l),c(e,s),i||(a=Oe(s,"click",o[11]),i=!0)},p:Ge,i:Ge,o:Ge,d(u){u&&p(e),i=!1,a()}}}function po(o){let e,t,n,l,s="Loading LSP advertisements...",r;return t=new Jt({props:{class:"h-6 w-6 animate-spin text-muted-foreground"}}),{c(){e=m("div"),Se(t.$$.fragment),n=A(),l=m("span"),l.textContent=s,this.h()},l(i){e=g(i,"DIV",{class:!0});var a=S(e);Ie(t.$$.fragment,a),n=P(a),l=g(a,"SPAN",{class:!0,"data-svelte-h":!0}),G(l)!=="svelte-m93hrb"&&(l.textContent=s),a.forEach(p),this.h()},h(){h(l,"class","ml-2 text-muted-foreground"),h(e,"class","flex items-center justify-center py-12")},m(i,a){W(i,e,a),ke(t,e,null),c(e,n),c(e,l),r=!0},p:Ge,i(i){r||(V(t.$$.fragment,i),r=!0)},o(i){j(t.$$.fragment,i),r=!1},d(i){i&&p(e),Ee(t)}}}function pl(o){let e,t=o[42].value_prop+"",n;return{c(){e=m("span"),n=R(t),this.h()},l(l){e=g(l,"SPAN",{class:!0});var s=S(e);n=L(s,t),s.forEach(p),this.h()},h(){h(e,"class","bg-primary/10 text-primary px-2 py-0.5 rounded text-xs")},m(l,s){W(l,e,s),c(e,n)},p(l,s){s[0]&1&&t!==(t=l[42].value_prop+"")&&ie(n,t)},d(l){l&&p(e)}}}function bl(o){let e,t,n,l,s,r=(o[42].lsp_alias||"Unknown LSP")+"",i,a,u,f,w,d,v="Capacity:",_,I=ye(o[42].min_channel_balance_sat)+"",E,b,C=ye(o[42].max_channel_balance_sat)+"",y,N,T,D,B,Y="Fixed Cost:",z,$=ye(o[42].fixed_cost_sats)+"",O,H,U,M,Q,q="Variable Cost:",K,ue=o[42].variable_cost_ppm+"",ae,te,Le,le,fe,Re="Max Duration:",Ae,re=o[42].max_channel_expiry_blocks+"",k,x,se,F,Z="Select",de,De,Te,J=o[42].value_prop&&pl(o);function pe(){return o[18](o[42])}return{c(){e=m("div"),t=m("div"),n=m("div"),l=m("div"),s=m("h3"),i=R(r),a=A(),J&&J.c(),u=A(),f=m("div"),w=m("div"),d=m("span"),d.textContent=v,_=A(),E=R(I),b=R(" - "),y=R(C),N=R(" sats"),T=A(),D=m("div"),B=m("span"),B.textContent=Y,z=A(),O=R($),H=R(" sats"),U=A(),M=m("div"),Q=m("span"),Q.textContent=q,K=A(),ae=R(ue),te=R(" ppm"),Le=A(),le=m("div"),fe=m("span"),fe.textContent=Re,Ae=A(),k=R(re),x=R(" blocks"),se=A(),F=m("button"),F.textContent=Z,de=A(),this.h()},l(ce){e=g(ce,"DIV",{class:!0});var oe=S(e);t=g(oe,"DIV",{class:!0});var Ve=S(t);n=g(Ve,"DIV",{class:!0});var we=S(n);l=g(we,"DIV",{class:!0});var ne=S(l);s=g(ne,"H3",{class:!0});var xe=S(s);i=L(xe,r),xe.forEach(p),a=P(ne),J&&J.l(ne),ne.forEach(p),u=P(we),f=g(we,"DIV",{class:!0});var ve=S(f);w=g(ve,"DIV",{});var he=S(w);d=g(he,"SPAN",{class:!0,"data-svelte-h":!0}),G(d)!=="svelte-1635pws"&&(d.textContent=v),_=P(he),E=L(he,I),b=L(he," - "),y=L(he,C),N=L(he," sats"),he.forEach(p),T=P(ve),D=g(ve,"DIV",{});var Ne=S(D);B=g(Ne,"SPAN",{class:!0,"data-svelte-h":!0}),G(B)!=="svelte-8q8sen"&&(B.textContent=Y),z=P(Ne),O=L(Ne,$),H=L(Ne," sats"),Ne.forEach(p),U=P(ve),M=g(ve,"DIV",{});var Pe=S(M);Q=g(Pe,"SPAN",{class:!0,"data-svelte-h":!0}),G(Q)!=="svelte-1kyfecb"&&(Q.textContent=q),K=P(Pe),ae=L(Pe,ue),te=L(Pe," ppm"),Pe.forEach(p),Le=P(ve),le=g(ve,"DIV",{});var He=S(le);fe=g(He,"SPAN",{class:!0,"data-svelte-h":!0}),G(fe)!=="svelte-1rfb0mu"&&(fe.textContent=Re),Ae=P(He),k=L(He,re),x=L(He," blocks"),He.forEach(p),ve.forEach(p),we.forEach(p),se=P(Ve),F=g(Ve,"BUTTON",{class:!0,"data-svelte-h":!0}),G(F)!=="svelte-hp54cd"&&(F.textContent=Z),Ve.forEach(p),de=P(oe),oe.forEach(p),this.h()},h(){h(s,"class","font-medium"),h(l,"class","flex items-center gap-2 mb-2"),h(d,"class","font-medium"),h(B,"class","font-medium"),h(Q,"class","font-medium"),h(fe,"class","font-medium"),h(f,"class","grid grid-cols-2 md:grid-cols-4 gap-2 text-sm text-muted-foreground"),h(n,"class","flex-1"),h(F,"class","px-4 py-2 bg-primary text-primary-foreground rounded-md hover:bg-primary/90 transition-colors ml-4"),h(t,"class","flex items-center justify-between"),h(e,"class","border rounded-lg p-4 hover:bg-accent/50 transition-colors")},m(ce,oe){W(ce,e,oe),c(e,t),c(t,n),c(n,l),c(l,s),c(s,i),c(l,a),J&&J.m(l,null),c(n,u),c(n,f),c(f,w),c(w,d),c(w,_),c(w,E),c(w,b),c(w,y),c(w,N),c(f,T),c(f,D),c(D,B),c(D,z),c(D,O),c(D,H),c(f,U),c(f,M),c(M,Q),c(M,K),c(M,ae),c(M,te),c(f,Le),c(f,le),c(le,fe),c(le,Ae),c(le,k),c(le,x),c(t,se),c(t,F),c(e,de),De||(Te=Oe(F,"click",pe),De=!0)},p(ce,oe){o=ce,oe[0]&1&&r!==(r=(o[42].lsp_alias||"Unknown LSP")+"")&&ie(i,r),o[42].value_prop?J?J.p(o,oe):(J=pl(o),J.c(),J.m(l,null)):J&&(J.d(1),J=null),oe[0]&1&&I!==(I=ye(o[42].min_channel_balance_sat)+"")&&ie(E,I),oe[0]&1&&C!==(C=ye(o[42].max_channel_balance_sat)+"")&&ie(y,C),oe[0]&1&&$!==($=ye(o[42].fixed_cost_sats)+"")&&ie(O,$),oe[0]&1&&ue!==(ue=o[42].variable_cost_ppm+"")&&ie(ae,ue),oe[0]&1&&re!==(re=o[42].max_channel_expiry_blocks+"")&&ie(k,re)},d(ce){ce&&p(e),J&&J.d(),De=!1,Te()}}}function vl(o){let e,t,n,l="Step 2: Configure Channel",s,r,i="Back to LSPs",a,u,f,w,d=(o[1].lsp_alias||"Unknown")+"",v,_,I,E,b,C="Capacity Range:",y,N=ye(o[1].min_channel_balance_sat)+"",T,D,B=ye(o[1].max_channel_balance_sat)+"",Y,z,$,O,H,U="Fixed Cost:",M,Q=ye(o[1].fixed_cost_sats)+"",q,K,ue,ae,te,Le="Variable Cost:",le,fe=o[1].variable_cost_ppm+"",Re,Ae,re,k,x,se="Max Duration:",F,Z=o[1].max_channel_expiry_blocks+"",de,De,Te,J,pe,ce,oe,Ve="LSP Balance (sats)",we,ne,xe,ve,he,Ne,Pe,He="Your Balance (sats)",Ue,ee,_e,be,ct,qe,Ce,Ct='Your Node URI <span class="text-destructive">*</span>',Bt,Be,Tt,Fe,Qe,yt="Channel Summary",wt,ze,We,Je,Ut="Total Capacity:",Cn,Et,Zn=ye(o[15]())+"",yn,wn,En,kt,It,Xn="Estimated Cost:",kn,St,Ft=ye(o[1].fixed_cost_sats+Math.round(o[1].variable_cost_ppm*o[15]()/1e6))+"",Gt,In,Sn,ut,st,Nn,ft,el="Announce channel publicly",Pn,Ze,Xe,et,Qt,Wt,Me,An,tl;const nl=[vo,bo],Nt=[];function ll(X,ge){return X[5]?0:1}return Xe=ll(o),et=Nt[Xe]=nl[Xe](o),{c(){e=m("div"),t=m("div"),n=m("h2"),n.textContent=l,s=A(),r=m("button"),r.textContent=i,a=A(),u=m("div"),f=m("h3"),w=R("Selected LSP: "),v=R(d),_=A(),I=m("div"),E=m("div"),b=m("span"),b.textContent=C,y=A(),T=R(N),D=R(" - "),Y=R(B),z=R(" sats"),$=A(),O=m("div"),H=m("span"),H.textContent=U,M=A(),q=R(Q),K=R(" sats"),ue=A(),ae=m("div"),te=m("span"),te.textContent=Le,le=A(),Re=R(fe),Ae=R(" ppm"),re=A(),k=m("div"),x=m("span"),x.textContent=se,F=A(),de=R(Z),De=R(" blocks"),Te=A(),J=m("form"),pe=m("div"),ce=m("div"),oe=m("label"),oe.textContent=Ve,we=A(),ne=m("input"),he=A(),Ne=m("div"),Pe=m("label"),Pe.textContent=He,Ue=A(),ee=m("input"),ct=A(),qe=m("div"),Ce=m("label"),Ce.innerHTML=Ct,Bt=A(),Be=m("input"),Tt=A(),Fe=m("div"),Qe=m("h4"),Qe.textContent=yt,wt=A(),ze=m("div"),We=m("div"),Je=m("span"),Je.textContent=Ut,Cn=A(),Et=m("span"),yn=R(Zn),wn=R(" sats"),En=A(),kt=m("div"),It=m("span"),It.textContent=Xn,kn=A(),St=m("span"),Gt=R(Ft),In=R(" sats"),Sn=A(),ut=m("div"),st=m("input"),Nn=A(),ft=m("label"),ft.textContent=el,Pn=A(),Ze=m("button"),et.c(),Qt=R(`
					Submit Order Request`),this.h()},l(X){e=g(X,"DIV",{class:!0});var ge=S(e);t=g(ge,"DIV",{class:!0});var dt=S(t);n=g(dt,"H2",{class:!0,"data-svelte-h":!0}),G(n)!=="svelte-1lzwhtp"&&(n.textContent=l),s=P(dt),r=g(dt,"BUTTON",{class:!0,"data-svelte-h":!0}),G(r)!=="svelte-oh7hq9"&&(r.textContent=i),dt.forEach(p),a=P(ge),u=g(ge,"DIV",{class:!0});var Zt=S(u);f=g(Zt,"H3",{class:!0});var Dn=S(f);w=L(Dn,"Selected LSP: "),v=L(Dn,d),Dn.forEach(p),_=P(Zt),I=g(Zt,"DIV",{class:!0});var ht=S(I);E=g(ht,"DIV",{});var Pt=S(E);b=g(Pt,"SPAN",{class:!0,"data-svelte-h":!0}),G(b)!=="svelte-nms6k1"&&(b.textContent=C),y=P(Pt),T=L(Pt,N),D=L(Pt," - "),Y=L(Pt,B),z=L(Pt," sats"),Pt.forEach(p),$=P(ht),O=g(ht,"DIV",{});var zt=S(O);H=g(zt,"SPAN",{class:!0,"data-svelte-h":!0}),G(H)!=="svelte-8q8sen"&&(H.textContent=U),M=P(zt),q=L(zt,Q),K=L(zt," sats"),zt.forEach(p),ue=P(ht),ae=g(ht,"DIV",{});var Ot=S(ae);te=g(Ot,"SPAN",{class:!0,"data-svelte-h":!0}),G(te)!=="svelte-1kyfecb"&&(te.textContent=Le),le=P(Ot),Re=L(Ot,fe),Ae=L(Ot," ppm"),Ot.forEach(p),re=P(ht),k=g(ht,"DIV",{});var jt=S(k);x=g(jt,"SPAN",{class:!0,"data-svelte-h":!0}),G(x)!=="svelte-1rfb0mu"&&(x.textContent=se),F=P(jt),de=L(jt,Z),De=L(jt," blocks"),jt.forEach(p),ht.forEach(p),Zt.forEach(p),Te=P(ge),J=g(ge,"FORM",{class:!0});var tt=S(J);pe=g(tt,"DIV",{class:!0});var Xt=S(pe);ce=g(Xt,"DIV",{});var en=S(ce);oe=g(en,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),G(oe)!=="svelte-1hgbat5"&&(oe.textContent=Ve),we=P(en),ne=g(en,"INPUT",{id:!0,type:!0,min:!0,max:!0,class:!0}),en.forEach(p),he=P(Xt),Ne=g(Xt,"DIV",{});var tn=S(Ne);Pe=g(tn,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),G(Pe)!=="svelte-12775t9"&&(Pe.textContent=He),Ue=P(tn),ee=g(tn,"INPUT",{id:!0,type:!0,min:!0,max:!0,class:!0}),tn.forEach(p),Xt.forEach(p),ct=P(tt),qe=g(tt,"DIV",{});var nn=S(qe);Ce=g(nn,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),G(Ce)!=="svelte-1nq9340"&&(Ce.innerHTML=Ct),Bt=P(nn),Be=g(nn,"INPUT",{id:!0,type:!0,placeholder:!0,class:!0}),nn.forEach(p),Tt=P(tt),Fe=g(tt,"DIV",{class:!0});var ln=S(Fe);Qe=g(ln,"H4",{class:!0,"data-svelte-h":!0}),G(Qe)!=="svelte-w8sc01"&&(Qe.textContent=yt),wt=P(ln),ze=g(ln,"DIV",{class:!0});var sn=S(ze);We=g(sn,"DIV",{});var on=S(We);Je=g(on,"SPAN",{class:!0,"data-svelte-h":!0}),G(Je)!=="svelte-14we5io"&&(Je.textContent=Ut),Cn=P(on),Et=g(on,"SPAN",{class:!0});var Bn=S(Et);yn=L(Bn,Zn),wn=L(Bn," sats"),Bn.forEach(p),on.forEach(p),En=P(sn),kt=g(sn,"DIV",{});var rn=S(kt);It=g(rn,"SPAN",{class:!0,"data-svelte-h":!0}),G(It)!=="svelte-12vm23t"&&(It.textContent=Xn),kn=P(rn),St=g(rn,"SPAN",{class:!0});var Tn=S(St);Gt=L(Tn,Ft),In=L(Tn," sats"),Tn.forEach(p),rn.forEach(p),sn.forEach(p),ln.forEach(p),Sn=P(tt),ut=g(tt,"DIV",{class:!0});var an=S(ut);st=g(an,"INPUT",{id:!0,type:!0,class:!0}),Nn=P(an),ft=g(an,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),G(ft)!=="svelte-1fe6z73"&&(ft.textContent=el),an.forEach(p),Pn=P(tt),Ze=g(tt,"BUTTON",{type:!0,class:!0});var Mn=S(Ze);et.l(Mn),Qt=L(Mn,`
					Submit Order Request`),Mn.forEach(p),tt.forEach(p),ge.forEach(p),this.h()},h(){h(n,"class","text-xl font-semibold"),h(r,"class","px-3 py-1.5 border rounded-md hover:bg-accent transition-colors"),h(t,"class","flex items-center justify-between mb-4"),h(f,"class","font-medium mb-2"),h(b,"class","font-medium"),h(H,"class","font-medium"),h(te,"class","font-medium"),h(x,"class","font-medium"),h(I,"class","grid grid-cols-2 md:grid-cols-4 gap-2 text-sm text-muted-foreground"),h(u,"class","bg-background border rounded-lg p-4 mb-6"),h(oe,"for","lsp_balance"),h(oe,"class","block text-sm font-medium mb-2"),h(ne,"id","lsp_balance"),h(ne,"type","number"),h(ne,"min",xe=o[1].min_initial_lsp_balance_sat||0),h(ne,"max",ve=o[1].max_initial_lsp_balance_sat||o[1].max_channel_balance_sat),h(ne,"class","w-full px-3 py-2 border rounded-md bg-background focus:ring-2 focus:ring-primary/20 focus:border-primary"),h(Pe,"for","client_balance"),h(Pe,"class","block text-sm font-medium mb-2"),h(ee,"id","client_balance"),h(ee,"type","number"),h(ee,"min",_e=o[1].min_initial_client_balance_sat||0),h(ee,"max",be=o[1].max_initial_client_balance_sat||o[1].max_channel_balance_sat),h(ee,"class","w-full px-3 py-2 border rounded-md bg-background focus:ring-2 focus:ring-primary/20 focus:border-primary"),h(pe,"class","grid md:grid-cols-2 gap-6"),h(Ce,"for","target_pubkey_uri"),h(Ce,"class","block text-sm font-medium mb-2"),h(Be,"id","target_pubkey_uri"),h(Be,"type","text"),h(Be,"placeholder","pubkey@host:port"),Be.required=!0,h(Be,"class","w-full px-3 py-2 border rounded-md bg-background focus:ring-2 focus:ring-primary/20 focus:border-primary"),h(Qe,"class","font-medium mb-2"),h(Je,"class","text-muted-foreground"),h(Et,"class","font-medium"),h(It,"class","text-muted-foreground"),h(St,"class","font-medium"),h(ze,"class","grid grid-cols-2 gap-4 text-sm"),h(Fe,"class","bg-background border rounded-lg p-4"),h(st,"id","announce_channel"),h(st,"type","checkbox"),h(st,"class","rounded border-border"),h(ft,"for","announce_channel"),h(ft,"class","text-sm"),h(ut,"class","flex items-center gap-2"),h(Ze,"type","submit"),Ze.disabled=Wt=o[5]||!o[2].target_pubkey_uri,h(Ze,"class","w-full py-3 px-4 bg-primary text-primary-foreground rounded-md hover:bg-primary/90 transition-colors disabled:opacity-50 flex items-center justify-center gap-2"),h(J,"class","space-y-6"),h(e,"class","bg-secondary/50 rounded-xl border p-6")},m(X,ge){W(X,e,ge),c(e,t),c(t,n),c(t,s),c(t,r),c(e,a),c(e,u),c(u,f),c(f,w),c(f,v),c(u,_),c(u,I),c(I,E),c(E,b),c(E,y),c(E,T),c(E,D),c(E,Y),c(E,z),c(I,$),c(I,O),c(O,H),c(O,M),c(O,q),c(O,K),c(I,ue),c(I,ae),c(ae,te),c(ae,le),c(ae,Re),c(ae,Ae),c(I,re),c(I,k),c(k,x),c(k,F),c(k,de),c(k,De),c(e,Te),c(e,J),c(J,pe),c(pe,ce),c(ce,oe),c(ce,we),c(ce,ne),Mt(ne,o[2].lsp_balance_sat),c(pe,he),c(pe,Ne),c(Ne,Pe),c(Ne,Ue),c(Ne,ee),Mt(ee,o[2].client_balance_sat),c(J,ct),c(J,qe),c(qe,Ce),c(qe,Bt),c(qe,Be),Mt(Be,o[2].target_pubkey_uri),c(J,Tt),c(J,Fe),c(Fe,Qe),c(Fe,wt),c(Fe,ze),c(ze,We),c(We,Je),c(We,Cn),c(We,Et),c(Et,yn),c(Et,wn),c(ze,En),c(ze,kt),c(kt,It),c(kt,kn),c(kt,St),c(St,Gt),c(St,In),c(J,Sn),c(J,ut),c(ut,st),st.checked=o[2].announce_channel,c(ut,Nn),c(ut,ft),c(J,Pn),c(J,Ze),Nt[Xe].m(Ze,null),c(Ze,Qt),Me=!0,An||(tl=[Oe(r,"click",o[16]),Oe(ne,"input",o[19]),Oe(ee,"input",o[20]),Oe(Be,"input",o[21]),Oe(st,"change",o[22]),Oe(J,"submit",Gl(o[13]))],An=!0)},p(X,ge){(!Me||ge[0]&2)&&d!==(d=(X[1].lsp_alias||"Unknown")+"")&&ie(v,d),(!Me||ge[0]&2)&&N!==(N=ye(X[1].min_channel_balance_sat)+"")&&ie(T,N),(!Me||ge[0]&2)&&B!==(B=ye(X[1].max_channel_balance_sat)+"")&&ie(Y,B),(!Me||ge[0]&2)&&Q!==(Q=ye(X[1].fixed_cost_sats)+"")&&ie(q,Q),(!Me||ge[0]&2)&&fe!==(fe=X[1].variable_cost_ppm+"")&&ie(Re,fe),(!Me||ge[0]&2)&&Z!==(Z=X[1].max_channel_expiry_blocks+"")&&ie(de,Z),(!Me||ge[0]&2&&xe!==(xe=X[1].min_initial_lsp_balance_sat||0))&&h(ne,"min",xe),(!Me||ge[0]&2&&ve!==(ve=X[1].max_initial_lsp_balance_sat||X[1].max_channel_balance_sat))&&h(ne,"max",ve),ge[0]&4&&hn(ne.value)!==X[2].lsp_balance_sat&&Mt(ne,X[2].lsp_balance_sat),(!Me||ge[0]&2&&_e!==(_e=X[1].min_initial_client_balance_sat||0))&&h(ee,"min",_e),(!Me||ge[0]&2&&be!==(be=X[1].max_initial_client_balance_sat||X[1].max_channel_balance_sat))&&h(ee,"max",be),ge[0]&4&&hn(ee.value)!==X[2].client_balance_sat&&Mt(ee,X[2].client_balance_sat),ge[0]&4&&Be.value!==X[2].target_pubkey_uri&&Mt(Be,X[2].target_pubkey_uri),(!Me||ge[0]&2)&&Ft!==(Ft=ye(X[1].fixed_cost_sats+Math.round(X[1].variable_cost_ppm*X[15]()/1e6))+"")&&ie(Gt,Ft),ge[0]&4&&(st.checked=X[2].announce_channel);let dt=Xe;Xe=ll(X),Xe!==dt&&(Ke(),j(Nt[dt],1,1,()=>{Nt[dt]=null}),Ye(),et=Nt[Xe],et||(et=Nt[Xe]=nl[Xe](X),et.c()),V(et,1),et.m(Ze,Qt)),(!Me||ge[0]&36&&Wt!==(Wt=X[5]||!X[2].target_pubkey_uri))&&(Ze.disabled=Wt)},i(X){Me||(V(et),Me=!0)},o(X){j(et),Me=!1},d(X){X&&p(e),Nt[Xe].d(),An=!1,Pl(tl)}}}function bo(o){let e,t;return e=new Es({props:{class:"h-4 w-4"}}),{c(){Se(e.$$.fragment)},l(n){Ie(e.$$.fragment,n)},m(n,l){ke(e,n,l),t=!0},i(n){t||(V(e.$$.fragment,n),t=!0)},o(n){j(e.$$.fragment,n),t=!1},d(n){Ee(e,n)}}}function vo(o){let e,t;return e=new Jt({props:{class:"h-4 w-4 animate-spin"}}),{c(){Se(e.$$.fragment)},l(n){Ie(e.$$.fragment,n)},m(n,l){ke(e,n,l),t=!0},i(n){t||(V(e.$$.fragment,n),t=!0)},o(n){j(e.$$.fragment,n),t=!1},d(n){Ee(e,n)}}}function Cl(o){let e,t,n,l,s,r="Step 3: Order Receipt",i,a,u,f="Order Confirmation",w,d,v,_,I="Order ID:",E,b,C=(o[3].order_id||"N/A")+"",y,N,T,D,B="Status:",Y,z,$=(o[3].order_state||"N/A")+"",O,H,U,M,Q="LSP Balance:",q,K,ue=ye(o[3].lsp_balance_sat||0)+"",ae,te,Le,le,fe,Re="Your Balance:",Ae,re,k=ye(o[3].client_balance_sat||0)+"",x,se,F,Z,de,De="Channel Duration:",Te,J,pe=(o[3].channel_expiry_blocks||0)+"",ce,oe,Ve,we,ne,xe="Public Channel:",ve,he,Ne=o[3].announce_channel?"Yes":"No",Pe,He,Ue;n=new Jn({props:{class:"h-6 w-6 text-green-500"}});let ee=o[3]&&yl(Fn(o));return{c(){e=m("div"),t=m("div"),Se(n.$$.fragment),l=A(),s=m("h2"),s.textContent=r,i=A(),a=m("div"),u=m("h3"),u.textContent=f,w=A(),d=m("div"),v=m("div"),_=m("span"),_.textContent=I,E=A(),b=m("code"),y=R(C),N=A(),T=m("div"),D=m("span"),D.textContent=B,Y=A(),z=m("span"),O=R($),H=A(),U=m("div"),M=m("span"),M.textContent=Q,q=A(),K=m("span"),ae=R(ue),te=R(" sats"),Le=A(),le=m("div"),fe=m("span"),fe.textContent=Re,Ae=A(),re=m("span"),x=R(k),se=R(" sats"),F=A(),Z=m("div"),de=m("span"),de.textContent=De,Te=A(),J=m("span"),ce=R(pe),oe=R(" blocks"),Ve=A(),we=m("div"),ne=m("span"),ne.textContent=xe,ve=A(),he=m("span"),Pe=R(Ne),He=A(),ee&&ee.c(),this.h()},l(_e){e=g(_e,"DIV",{class:!0});var be=S(e);t=g(be,"DIV",{class:!0});var ct=S(t);Ie(n.$$.fragment,ct),l=P(ct),s=g(ct,"H2",{class:!0,"data-svelte-h":!0}),G(s)!=="svelte-h4it4n"&&(s.textContent=r),ct.forEach(p),i=P(be),a=g(be,"DIV",{class:!0});var qe=S(a);u=g(qe,"H3",{class:!0,"data-svelte-h":!0}),G(u)!=="svelte-1jy0wis"&&(u.textContent=f),w=P(qe),d=g(qe,"DIV",{class:!0});var Ce=S(d);v=g(Ce,"DIV",{});var Ct=S(v);_=g(Ct,"SPAN",{class:!0,"data-svelte-h":!0}),G(_)!=="svelte-140bt8b"&&(_.textContent=I),E=P(Ct),b=g(Ct,"CODE",{class:!0});var Bt=S(b);y=L(Bt,C),Bt.forEach(p),Ct.forEach(p),N=P(Ce),T=g(Ce,"DIV",{});var Be=S(T);D=g(Be,"SPAN",{class:!0,"data-svelte-h":!0}),G(D)!=="svelte-13lrem4"&&(D.textContent=B),Y=P(Be),z=g(Be,"SPAN",{class:!0});var Tt=S(z);O=L(Tt,$),Tt.forEach(p),Be.forEach(p),H=P(Ce),U=g(Ce,"DIV",{});var Fe=S(U);M=g(Fe,"SPAN",{class:!0,"data-svelte-h":!0}),G(M)!=="svelte-1sj50ir"&&(M.textContent=Q),q=P(Fe),K=g(Fe,"SPAN",{class:!0});var Qe=S(K);ae=L(Qe,ue),te=L(Qe," sats"),Qe.forEach(p),Fe.forEach(p),Le=P(Ce),le=g(Ce,"DIV",{});var yt=S(le);fe=g(yt,"SPAN",{class:!0,"data-svelte-h":!0}),G(fe)!=="svelte-1t408nx"&&(fe.textContent=Re),Ae=P(yt),re=g(yt,"SPAN",{class:!0});var wt=S(re);x=L(wt,k),se=L(wt," sats"),wt.forEach(p),yt.forEach(p),F=P(Ce),Z=g(Ce,"DIV",{});var ze=S(Z);de=g(ze,"SPAN",{class:!0,"data-svelte-h":!0}),G(de)!=="svelte-1rw4if"&&(de.textContent=De),Te=P(ze),J=g(ze,"SPAN",{class:!0});var We=S(J);ce=L(We,pe),oe=L(We," blocks"),We.forEach(p),ze.forEach(p),Ve=P(Ce),we=g(Ce,"DIV",{});var Je=S(we);ne=g(Je,"SPAN",{class:!0,"data-svelte-h":!0}),G(ne)!=="svelte-1jubcy8"&&(ne.textContent=xe),ve=P(Je),he=g(Je,"SPAN",{class:!0});var Ut=S(he);Pe=L(Ut,Ne),Ut.forEach(p),Je.forEach(p),Ce.forEach(p),qe.forEach(p),He=P(be),ee&&ee.l(be),be.forEach(p),this.h()},h(){h(s,"class","text-xl font-semibold"),h(t,"class","flex items-center gap-3 mb-6"),h(u,"class","font-medium mb-3"),h(_,"class","text-muted-foreground"),h(b,"class","ml-2 bg-muted px-2 py-0.5 rounded text-xs"),h(D,"class","text-muted-foreground"),h(z,"class","ml-2 font-medium"),h(M,"class","text-muted-foreground"),h(K,"class","ml-2 font-medium"),h(fe,"class","text-muted-foreground"),h(re,"class","ml-2 font-medium"),h(de,"class","text-muted-foreground"),h(J,"class","ml-2 font-medium"),h(ne,"class","text-muted-foreground"),h(he,"class","ml-2 font-medium"),h(d,"class","grid grid-cols-2 gap-4 text-sm"),h(a,"class","bg-background border rounded-lg p-4 mb-6"),h(e,"class","bg-secondary/50 rounded-xl border p-6")},m(_e,be){W(_e,e,be),c(e,t),ke(n,t,null),c(t,l),c(t,s),c(e,i),c(e,a),c(a,u),c(a,w),c(a,d),c(d,v),c(v,_),c(v,E),c(v,b),c(b,y),c(d,N),c(d,T),c(T,D),c(T,Y),c(T,z),c(z,O),c(d,H),c(d,U),c(U,M),c(U,q),c(U,K),c(K,ae),c(K,te),c(d,Le),c(d,le),c(le,fe),c(le,Ae),c(le,re),c(re,x),c(re,se),c(d,F),c(d,Z),c(Z,de),c(Z,Te),c(Z,J),c(J,ce),c(J,oe),c(d,Ve),c(d,we),c(we,ne),c(we,ve),c(we,he),c(he,Pe),c(e,He),ee&&ee.m(e,null),Ue=!0},p(_e,be){(!Ue||be[0]&8)&&C!==(C=(_e[3].order_id||"N/A")+"")&&ie(y,C),(!Ue||be[0]&8)&&$!==($=(_e[3].order_state||"N/A")+"")&&ie(O,$),(!Ue||be[0]&8)&&ue!==(ue=ye(_e[3].lsp_balance_sat||0)+"")&&ie(ae,ue),(!Ue||be[0]&8)&&k!==(k=ye(_e[3].client_balance_sat||0)+"")&&ie(x,k),(!Ue||be[0]&8)&&pe!==(pe=(_e[3].channel_expiry_blocks||0)+"")&&ie(ce,pe),(!Ue||be[0]&8)&&Ne!==(Ne=_e[3].announce_channel?"Yes":"No")&&ie(Pe,Ne),_e[3]?ee?(ee.p(Fn(_e),be),be[0]&8&&V(ee,1)):(ee=yl(Fn(_e)),ee.c(),V(ee,1),ee.m(e,null)):ee&&(Ke(),j(ee,1,1,()=>{ee=null}),Ye())},i(_e){Ue||(V(n.$$.fragment,_e),V(ee),Ue=!0)},o(_e){j(n.$$.fragment,_e),j(ee),Ue=!1},d(_e){_e&&p(e),Ee(n),ee&&ee.d()}}}function yl(o){let e,t,n,l="Payment Required",s,r,i,a,u,f;function w(b,C){return b[40]?yo:Co}let d=w(o),v=d(o);const _=[Eo,wo],I=[];function E(b,C){return b[40]?0:1}return a=E(o),u=I[a]=_[a](o),{c(){e=m("div"),t=m("div"),n=m("h3"),n.textContent=l,s=A(),r=m("p"),v.c(),i=A(),u.c(),this.h()},l(b){e=g(b,"DIV",{class:!0});var C=S(e);t=g(C,"DIV",{class:!0});var y=S(t);n=g(y,"H3",{class:!0,"data-svelte-h":!0}),G(n)!=="svelte-t3fsz8"&&(n.textContent=l),s=P(y),r=g(y,"P",{class:!0});var N=S(r);v.l(N),N.forEach(p),y.forEach(p),i=P(C),u.l(C),C.forEach(p),this.h()},h(){h(n,"class","text-lg font-medium mb-2"),h(r,"class","text-muted-foreground text-sm"),h(t,"class","text-center mb-4"),h(e,"class","bg-background border rounded-lg p-6 mb-6")},m(b,C){W(b,e,C),c(e,t),c(t,n),c(t,s),c(t,r),v.m(r,null),c(e,i),I[a].m(e,null),f=!0},p(b,C){d!==(d=w(b))&&(v.d(1),v=d(b),v&&(v.c(),v.m(r,null)));let y=a;a=E(b),a===y?I[a].p(b,C):(Ke(),j(I[y],1,1,()=>{I[y]=null}),Ye(),u=I[a],u?u.p(b,C):(u=I[a]=_[a](b),u.c()),V(u,1),u.m(e,null))},i(b){f||(V(u),f=!0)},o(b){j(u),f=!1},d(b){b&&p(e),v.d(),I[a].d()}}}function Co(o){let e;return{c(){e=R("Processing payment request...")},l(t){e=L(t,"Processing payment request...")},m(t,n){W(t,e,n)},d(t){t&&p(e)}}}function yo(o){let e;return{c(){e=R("Scan the QR code or copy the invoice to pay with your Lightning wallet")},l(t){e=L(t,"Scan the QR code or copy the invoice to pay with your Lightning wallet")},m(t,n){W(t,e,n)},d(t){t&&p(e)}}}function wo(o){let e,t,n="Debug: Order Response Structure",l,s,r=JSON.stringify(o[3],null,2)+"",i;return{c(){e=m("div"),t=m("h4"),t.textContent=n,l=A(),s=m("pre"),i=R(r),this.h()},l(a){e=g(a,"DIV",{class:!0});var u=S(e);t=g(u,"H4",{class:!0,"data-svelte-h":!0}),G(t)!=="svelte-1tw86wj"&&(t.textContent=n),l=P(u),s=g(u,"PRE",{class:!0});var f=S(s);i=L(f,r),f.forEach(p),u.forEach(p),this.h()},h(){h(t,"class","text-sm font-medium mb-2"),h(s,"class","text-xs whitespace-pre-wrap break-all"),h(e,"class","bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-800 rounded p-4")},m(a,u){W(a,e,u),c(e,t),c(e,l),c(e,s),c(s,i)},p(a,u){u[0]&8&&r!==(r=JSON.stringify(a[3],null,2)+"")&&ie(i,r)},i:Ge,o:Ge,d(a){a&&p(e)}}}function Eo(o){let e,t,n,l,s,r,i,a,u="Lightning Invoice",f,w,d,v=Nl(o[40])+"",_,I,E,b,C,y,N="This is a HODL invoice - payment will be held until the channel opens",T,D,B,Y,z,$,O,H,U,M,Q;const q=[Io,ko],K=[];function ue(k,x){return k[9]?0:1}n=ue(o),l=K[n]=q[n](o),b=new ds({props:{class:"h-4 w-4"}});function ae(){return o[23](o[40])}let te=o[41]&&wl(o);const Le=[No,So],le=[];function fe(k,x){return k[10]?0:1}z=fe(o),$=le[z]=Le[z](o);function Re(k,x){return k[10]?Ao:Po}let Ae=Re(o),re=Ae(o);return{c(){e=m("div"),t=m("div"),l.c(),s=A(),r=m("div"),i=m("div"),a=m("label"),a.textContent=u,f=A(),w=m("div"),d=m("code"),_=R(v),I=A(),E=m("button"),Se(b.$$.fragment),C=A(),y=m("p"),y.textContent=N,T=A(),te&&te.c(),D=A(),B=m("div"),Y=m("button"),$.c(),O=A(),H=m("p"),re.c(),this.h()},l(k){e=g(k,"DIV",{class:!0});var x=S(e);t=g(x,"DIV",{class:!0});var se=S(t);l.l(se),se.forEach(p),s=P(x),r=g(x,"DIV",{class:!0});var F=S(r);i=g(F,"DIV",{class:!0});var Z=S(i);a=g(Z,"LABEL",{class:!0,"data-svelte-h":!0}),G(a)!=="svelte-1hd39ta"&&(a.textContent=u),f=P(Z),w=g(Z,"DIV",{class:!0});var de=S(w);d=g(de,"CODE",{class:!0});var De=S(d);_=L(De,v),De.forEach(p),I=P(de),E=g(de,"BUTTON",{class:!0,title:!0});var Te=S(E);Ie(b.$$.fragment,Te),Te.forEach(p),de.forEach(p),C=P(Z),y=g(Z,"P",{class:!0,"data-svelte-h":!0}),G(y)!=="svelte-wpnmvb"&&(y.textContent=N),Z.forEach(p),T=P(F),te&&te.l(F),F.forEach(p),x.forEach(p),D=P(k),B=g(k,"DIV",{class:!0});var J=S(B);Y=g(J,"BUTTON",{class:!0});var pe=S(Y);$.l(pe),pe.forEach(p),O=P(J),H=g(J,"P",{class:!0});var ce=S(H);re.l(ce),ce.forEach(p),J.forEach(p),this.h()},h(){h(t,"class","flex-shrink-0"),h(a,"class","block text-sm font-medium mb-2"),h(d,"class","flex-1 bg-muted p-3 rounded text-xs break-all"),h(E,"class","flex-shrink-0 p-2 border rounded hover:bg-accent"),h(E,"title","Copy invoice to clipboard"),h(w,"class","flex items-center gap-2"),h(y,"class","text-xs text-muted-foreground mt-2"),h(i,"class","mb-4"),h(r,"class","flex-1 min-w-0"),h(e,"class","flex flex-col md:flex-row items-center gap-6"),Y.disabled=o[10],h(Y,"class","px-6 py-3 bg-primary text-primary-foreground rounded-md hover:bg-primary/90 disabled:opacity-50 transition-colors flex items-center gap-2 mx-auto"),h(H,"class","text-xs text-muted-foreground mt-2"),h(B,"class","text-center mt-6")},m(k,x){W(k,e,x),c(e,t),K[n].m(t,null),c(e,s),c(e,r),c(r,i),c(i,a),c(i,f),c(i,w),c(w,d),c(d,_),c(w,I),c(w,E),ke(b,E,null),c(i,C),c(i,y),c(r,T),te&&te.m(r,null),W(k,D,x),W(k,B,x),c(B,Y),le[z].m(Y,null),c(B,O),c(B,H),re.m(H,null),U=!0,M||(Q=[Oe(E,"click",ae),Oe(Y,"click",o[14])],M=!0)},p(k,x){o=k;let se=n;n=ue(o),n===se?K[n].p(o,x):(Ke(),j(K[se],1,1,()=>{K[se]=null}),Ye(),l=K[n],l?l.p(o,x):(l=K[n]=q[n](o),l.c()),V(l,1),l.m(t,null)),(!U||x[0]&8)&&v!==(v=Nl(o[40])+"")&&ie(_,v),o[41]?te?te.p(o,x):(te=wl(o),te.c(),te.m(r,null)):te&&(te.d(1),te=null);let F=z;z=fe(o),z!==F&&(Ke(),j(le[F],1,1,()=>{le[F]=null}),Ye(),$=le[z],$||($=le[z]=Le[z](o),$.c()),V($,1),$.m(Y,null)),(!U||x[0]&1024)&&(Y.disabled=o[10]),Ae!==(Ae=Re(o))&&(re.d(1),re=Ae(o),re&&(re.c(),re.m(H,null)))},i(k){U||(V(l),V(b.$$.fragment,k),V($),U=!0)},o(k){j(l),j(b.$$.fragment,k),j($),U=!1},d(k){k&&(p(e),p(D),p(B)),K[n].d(),Ee(b),te&&te.d(),le[z].d(),re.d(),M=!1,Pl(Q)}}}function ko(o){let e,t,n;return t=new _s({props:{class:"h-12 w-12 text-muted-foreground"}}),{c(){e=m("div"),Se(t.$$.fragment),this.h()},l(l){e=g(l,"DIV",{class:!0});var s=S(e);Ie(t.$$.fragment,s),s.forEach(p),this.h()},h(){h(e,"class","bg-muted w-48 h-48 rounded-lg flex items-center justify-center")},m(l,s){W(l,e,s),ke(t,e,null),n=!0},p:Ge,i(l){n||(V(t.$$.fragment,l),n=!0)},o(l){j(t.$$.fragment,l),n=!1},d(l){l&&p(e),Ee(t)}}}function Io(o){let e,t,n;return{c(){e=m("div"),t=m("img"),this.h()},l(l){e=g(l,"DIV",{class:!0});var s=S(e);t=g(s,"IMG",{src:!0,alt:!0,class:!0}),s.forEach(p),this.h()},h(){ol(t.src,n=o[9])||h(t,"src",n),h(t,"alt","Lightning Invoice QR Code"),h(t,"class","w-48 h-48"),h(e,"class","bg-white p-4 rounded-lg")},m(l,s){W(l,e,s),c(e,t)},p(l,s){s[0]&512&&!ol(t.src,n=l[9])&&h(t,"src",n)},i:Ge,o:Ge,d(l){l&&p(e)}}}function wl(o){let e,t,n="Amount",l,s,r=ye(o[41])+"",i,a;return{c(){e=m("div"),t=m("div"),t.textContent=n,l=A(),s=m("div"),i=R(r),a=R(" sats"),this.h()},l(u){e=g(u,"DIV",{class:!0});var f=S(e);t=g(f,"DIV",{class:!0,"data-svelte-h":!0}),G(t)!=="svelte-s10ry8"&&(t.textContent=n),l=P(f),s=g(f,"DIV",{class:!0});var w=S(s);i=L(w,r),a=L(w," sats"),w.forEach(p),f.forEach(p),this.h()},h(){h(t,"class","text-sm text-muted-foreground"),h(s,"class","text-xl font-bold"),h(e,"class","text-center bg-muted/50 rounded p-3")},m(u,f){W(u,e,f),c(e,t),c(e,l),c(e,s),c(s,i),c(s,a)},p(u,f){f[0]&8&&r!==(r=ye(u[41])+"")&&ie(i,r)},d(u){u&&p(e)}}}function So(o){let e,t,n;return e=new as({props:{class:"h-4 w-4"}}),{c(){Se(e.$$.fragment),t=R(`
									Start Monitoring Payment`)},l(l){Ie(e.$$.fragment,l),t=L(l,`
									Start Monitoring Payment`)},m(l,s){ke(e,l,s),W(l,t,s),n=!0},i(l){n||(V(e.$$.fragment,l),n=!0)},o(l){j(e.$$.fragment,l),n=!1},d(l){l&&p(t),Ee(e,l)}}}function No(o){let e,t,n;return e=new Jt({props:{class:"h-4 w-4 animate-spin"}}),{c(){Se(e.$$.fragment),t=R(`
									Monitoring for Payment...`)},l(l){Ie(e.$$.fragment,l),t=L(l,`
									Monitoring for Payment...`)},m(l,s){ke(e,l,s),W(l,t,s),n=!0},i(l){n||(V(e.$$.fragment,l),n=!0)},o(l){j(e.$$.fragment,l),n=!1},d(l){l&&p(t),Ee(e,l)}}}function Po(o){let e;return{c(){e=R("Click after paying to monitor when payment is received")},l(t){e=L(t,"Click after paying to monitor when payment is received")},m(t,n){W(t,e,n)},d(t){t&&p(e)}}}function Ao(o){let e;return{c(){e=R("Listening for payment confirmation from the LSP")},l(t){e=L(t,"Listening for payment confirmation from the LSP")},m(t,n){W(t,e,n)},d(t){t&&p(e)}}}function El(o){let e,t,n,l,s,r,i,a,u,f,w="Request Another Channel",d,v,_;n=new Jn({props:{class:"h-8 w-8 text-green-500"}});function I(D,B){return D[4]&&D[4].channel_state==="OPEN"?Bo:Do}let E=I(o),b=E(o),C=o[4]&&kl(o);function y(D,B){return D[4]&&D[4].channel_state==="OPEN"?Mo:To}let N=y(o),T=N(o);return{c(){e=m("div"),t=m("div"),Se(n.$$.fragment),l=A(),s=m("h2"),b.c(),r=A(),C&&C.c(),i=A(),a=m("p"),T.c(),u=A(),f=m("button"),f.textContent=w,this.h()},l(D){e=g(D,"DIV",{class:!0});var B=S(e);t=g(B,"DIV",{class:!0});var Y=S(t);Ie(n.$$.fragment,Y),l=P(Y),s=g(Y,"H2",{class:!0});var z=S(s);b.l(z),z.forEach(p),Y.forEach(p),r=P(B),C&&C.l(B),i=P(B),a=g(B,"P",{class:!0});var $=S(a);T.l($),$.forEach(p),u=P(B),f=g(B,"BUTTON",{class:!0,"data-svelte-h":!0}),G(f)!=="svelte-7564xk"&&(f.textContent=w),B.forEach(p),this.h()},h(){h(s,"class","text-xl font-semibold"),h(t,"class","flex items-center justify-center gap-3 mb-4"),h(a,"class","text-muted-foreground mb-6"),h(f,"class","px-6 py-3 bg-primary text-primary-foreground rounded-md hover:bg-primary/90 transition-colors"),h(e,"class","bg-secondary/50 rounded-xl border p-6 text-center")},m(D,B){W(D,e,B),c(e,t),ke(n,t,null),c(t,l),c(t,s),b.m(s,null),c(e,r),C&&C.m(e,null),c(e,i),c(e,a),T.m(a,null),c(e,u),c(e,f),d=!0,v||(_=Oe(f,"click",o[16]),v=!0)},p(D,B){E!==(E=I(D))&&(b.d(1),b=E(D),b&&(b.c(),b.m(s,null))),D[4]?C?C.p(D,B):(C=kl(D),C.c(),C.m(e,i)):C&&(C.d(1),C=null),N!==(N=y(D))&&(T.d(1),T=N(D),T&&(T.c(),T.m(a,null)))},i(D){d||(V(n.$$.fragment,D),d=!0)},o(D){j(n.$$.fragment,D),d=!1},d(D){D&&p(e),Ee(n),b.d(),C&&C.d(),T.d(),v=!1,_()}}}function Do(o){let e;return{c(){e=R("Payment Received - Channel Processing!")},l(t){e=L(t,"Payment Received - Channel Processing!")},m(t,n){W(t,e,n)},d(t){t&&p(e)}}}function Bo(o){let e;return{c(){e=R("Channel Opened Successfully!")},l(t){e=L(t,"Channel Opened Successfully!")},m(t,n){W(t,e,n)},d(t){t&&p(e)}}}function kl(o){let e,t,n="Channel Details",l,s,r,i,a="Status:",u,f,w=o[4].channel_state+"",d,v,_,I,E=o[4].txid_hex&&Il(o),b=o[4].output_index!==void 0&&Sl(o);return{c(){e=m("div"),t=m("h3"),t.textContent=n,l=A(),s=m("div"),r=m("div"),i=m("span"),i.textContent=a,u=A(),f=m("span"),d=R(w),_=A(),E&&E.c(),I=A(),b&&b.c(),this.h()},l(C){e=g(C,"DIV",{class:!0});var y=S(e);t=g(y,"H3",{class:!0,"data-svelte-h":!0}),G(t)!=="svelte-nkfpk0"&&(t.textContent=n),l=P(y),s=g(y,"DIV",{class:!0});var N=S(s);r=g(N,"DIV",{});var T=S(r);i=g(T,"SPAN",{class:!0,"data-svelte-h":!0}),G(i)!=="svelte-13lrem4"&&(i.textContent=a),u=P(T),f=g(T,"SPAN",{class:!0});var D=S(f);d=L(D,w),D.forEach(p),T.forEach(p),_=P(N),E&&E.l(N),I=P(N),b&&b.l(N),N.forEach(p),y.forEach(p),this.h()},h(){h(t,"class","font-medium mb-2 text-center"),h(i,"class","text-muted-foreground"),h(f,"class",v="ml-2 font-medium "+(o[4].channel_state==="OPEN"?"text-green-600":"text-yellow-600")),h(s,"class","space-y-2 text-sm"),h(e,"class","bg-background border rounded-lg p-4 mb-6 text-left max-w-md mx-auto")},m(C,y){W(C,e,y),c(e,t),c(e,l),c(e,s),c(s,r),c(r,i),c(r,u),c(r,f),c(f,d),c(s,_),E&&E.m(s,null),c(s,I),b&&b.m(s,null)},p(C,y){y[0]&16&&w!==(w=C[4].channel_state+"")&&ie(d,w),y[0]&16&&v!==(v="ml-2 font-medium "+(C[4].channel_state==="OPEN"?"text-green-600":"text-yellow-600"))&&h(f,"class",v),C[4].txid_hex?E?E.p(C,y):(E=Il(C),E.c(),E.m(s,I)):E&&(E.d(1),E=null),C[4].output_index!==void 0?b?b.p(C,y):(b=Sl(C),b.c(),b.m(s,null)):b&&(b.d(1),b=null)},d(C){C&&p(e),E&&E.d(),b&&b.d()}}}function Il(o){let e,t,n="Transaction:",l,s,r=o[4].txid_hex+"",i;return{c(){e=m("div"),t=m("span"),t.textContent=n,l=A(),s=m("code"),i=R(r),this.h()},l(a){e=g(a,"DIV",{});var u=S(e);t=g(u,"SPAN",{class:!0,"data-svelte-h":!0}),G(t)!=="svelte-1ij95t6"&&(t.textContent=n),l=P(u),s=g(u,"CODE",{class:!0});var f=S(s);i=L(f,r),f.forEach(p),u.forEach(p),this.h()},h(){h(t,"class","text-muted-foreground"),h(s,"class","bg-muted px-1 rounded text-xs ml-2")},m(a,u){W(a,e,u),c(e,t),c(e,l),c(e,s),c(s,i)},p(a,u){u[0]&16&&r!==(r=a[4].txid_hex+"")&&ie(i,r)},d(a){a&&p(e)}}}function Sl(o){let e,t,n="Output Index:",l,s,r=o[4].output_index+"",i;return{c(){e=m("div"),t=m("span"),t.textContent=n,l=A(),s=m("span"),i=R(r),this.h()},l(a){e=g(a,"DIV",{});var u=S(e);t=g(u,"SPAN",{class:!0,"data-svelte-h":!0}),G(t)!=="svelte-1ixogl7"&&(t.textContent=n),l=P(u),s=g(u,"SPAN",{class:!0});var f=S(s);i=L(f,r),f.forEach(p),u.forEach(p),this.h()},h(){h(t,"class","text-muted-foreground"),h(s,"class","ml-2")},m(a,u){W(a,e,u),c(e,t),c(e,l),c(e,s),c(s,i)},p(a,u){u[0]&16&&r!==(r=a[4].output_index+"")&&ie(i,r)},d(a){a&&p(e)}}}function To(o){let e;return{c(){e=R("Your payment has been received! The LSP is processing the channel opening.")},l(t){e=L(t,"Your payment has been received! The LSP is processing the channel opening.")},m(t,n){W(t,e,n)},d(t){t&&p(e)}}}function Mo(o){let e;return{c(){e=R("Your Lightning channel is now active and ready to use!")},l(t){e=L(t,"Your Lightning channel is now active and ready to use!")},m(t,n){W(t,e,n)},d(t){t&&p(e)}}}function $o(o){let e,t,n,l="Lightning Service Provider Marketplace",s,r,i="Find and request Lightning channels from LSPs using Nostr",a,u,f,w,d,v,_,I,E,b,C,y;const N=[ho,fo],T=[];function D(M,Q){return M[8].initialized?0:1}u=D(o),f=T[u]=N[u](o);let B=o[6]&&gl(o),Y=$t([1,2,3,4]),z=[];for(let M=0;M<4;M+=1)z[M]=ml(hl(o,Y,M));let $=o[7]===1&&_l(o),O=o[7]===2&&o[1]&&vl(o),H=o[7]===3&&o[3]&&Cl(o),U=o[7]===4&&El(o);return{c(){e=A(),t=m("div"),n=m("h1"),n.textContent=l,s=A(),r=m("p"),r.textContent=i,a=A(),f.c(),w=A(),B&&B.c(),d=A(),v=m("div"),_=m("div");for(let M=0;M<4;M+=1)z[M].c();I=A(),$&&$.c(),E=A(),O&&O.c(),b=A(),H&&H.c(),C=A(),U&&U.c(),this.h()},l(M){Kl("svelte-hbxjha",document.head).forEach(p),e=P(M),t=g(M,"DIV",{class:!0});var q=S(t);n=g(q,"H1",{class:!0,"data-svelte-h":!0}),G(n)!=="svelte-1jrz2lh"&&(n.textContent=l),s=P(q),r=g(q,"P",{class:!0,"data-svelte-h":!0}),G(r)!=="svelte-jvsqsd"&&(r.textContent=i),a=P(q),f.l(q),w=P(q),B&&B.l(q),d=P(q),v=g(q,"DIV",{class:!0});var K=S(v);_=g(K,"DIV",{class:!0});var ue=S(_);for(let ae=0;ae<4;ae+=1)z[ae].l(ue);ue.forEach(p),K.forEach(p),I=P(q),$&&$.l(q),E=P(q),O&&O.l(q),b=P(q),H&&H.l(q),C=P(q),U&&U.l(q),q.forEach(p),this.h()},h(){document.title="publsp - Lightning Service Provider Marketplace",h(n,"class","text-center text-3xl font-bold mb-2"),h(r,"class","text-center text-muted-foreground mb-8"),h(_,"class","flex items-center space-x-4"),h(v,"class","flex items-center justify-center mb-8"),h(t,"class","w-full max-w-4xl mx-auto")},m(M,Q){W(M,e,Q),W(M,t,Q),c(t,n),c(t,s),c(t,r),c(t,a),T[u].m(t,null),c(t,w),B&&B.m(t,null),c(t,d),c(t,v),c(v,_);for(let q=0;q<4;q+=1)z[q]&&z[q].m(_,null);c(t,I),$&&$.m(t,null),c(t,E),O&&O.m(t,null),c(t,b),H&&H.m(t,null),c(t,C),U&&U.m(t,null),y=!0},p(M,Q){let q=u;if(u=D(M),u===q?T[u].p(M,Q):(Ke(),j(T[q],1,1,()=>{T[q]=null}),Ye(),f=T[u],f?f.p(M,Q):(f=T[u]=N[u](M),f.c()),V(f,1),f.m(t,w)),M[6]?B?(B.p(M,Q),Q[0]&64&&V(B,1)):(B=gl(M),B.c(),V(B,1),B.m(t,d)):B&&(Ke(),j(B,1,1,()=>{B=null}),Ye()),Q[0]&128){Y=$t([1,2,3,4]);let K;for(K=0;K<4;K+=1){const ue=hl(M,Y,K);z[K]?z[K].p(ue,Q):(z[K]=ml(ue),z[K].c(),z[K].m(_,null))}for(;K<4;K+=1)z[K].d(1)}M[7]===1?$?($.p(M,Q),Q[0]&128&&V($,1)):($=_l(M),$.c(),V($,1),$.m(t,E)):$&&(Ke(),j($,1,1,()=>{$=null}),Ye()),M[7]===2&&M[1]?O?(O.p(M,Q),Q[0]&130&&V(O,1)):(O=vl(M),O.c(),V(O,1),O.m(t,b)):O&&(Ke(),j(O,1,1,()=>{O=null}),Ye()),M[7]===3&&M[3]?H?(H.p(M,Q),Q[0]&136&&V(H,1)):(H=Cl(M),H.c(),V(H,1),H.m(t,C)):H&&(Ke(),j(H,1,1,()=>{H=null}),Ye()),M[7]===4?U?(U.p(M,Q),Q[0]&128&&V(U,1)):(U=El(M),U.c(),V(U,1),U.m(t,null)):U&&(Ke(),j(U,1,1,()=>{U=null}),Ye())},i(M){y||(V(f),V(B),V($),V(O),V(H),V(U),y=!0)},o(M){j(f),j(B),j($),j(O),j(H),j(U),y=!1},d(M){M&&(p(e),p(t)),T[u].d(),B&&B.d(),qn(z,M),$&&$.d(),O&&O.d(),H&&H.d(),U&&U.d()}}}async function Lo(o){try{await navigator.clipboard.writeText(o),console.log("Copied to clipboard")}catch(e){console.error("Failed to copy to clipboard:",e)}}function Nl(o){return o?o.length<=40?o:o.substring(0,20)+"..."+o.substring(o.length-20):""}function ye(o){return new Intl.NumberFormat().format(o)}function Ro(o,e,t){const n=ot([]),l=ot(null),s=ot({lsp_balance_sat:1e5,client_balance_sat:0,channel_expiry_blocks:13e3,target_pubkey_uri:"",required_channel_confirmations:0,funding_confirms_within_blocks:6,announce_channel:!0}),r=ot(null),i=ot(null),a=ot(!1),u=ot(""),f=ot({sessionId:null,npub:null,initialized:!1}),w=ot(1);let d=[],v=null,_={lsp_balance_sat:1e5,client_balance_sat:0,channel_expiry_blocks:13e3,target_pubkey_uri:"",required_channel_confirmations:0,funding_confirms_within_blocks:6,announce_channel:!0},I=null,E=null,b=!1,C="",y=1,N={sessionId:null,npub:null,initialized:!1},T="",D=!1;n.subscribe(k=>t(0,d=k)),l.subscribe(k=>t(1,v=k)),s.subscribe(k=>t(2,_=k)),r.subscribe(k=>t(3,I=k)),i.subscribe(k=>t(4,E=k)),a.subscribe(k=>t(5,b=k)),u.subscribe(k=>t(6,C=k)),w.subscribe(k=>t(7,y=k)),f.subscribe(k=>t(8,N=k)),Yl(async()=>{await Y(),await O()});const B=window.location.hostname==="localhost"?"http://localhost:8000":"";async function Y(){if(!N.initialized)try{console.log("Creating new backend session...");const k=await fetch(`${B}/api/session/`,{method:"GET",headers:{"Content-Type":"application/json"}});if(k.ok){const x=await k.json();console.log("Backend session response:",x);const se={sessionId:x.session_id,npub:x.nostr_pubkey,initialized:!0};f.set(se),typeof localStorage<"u"&&localStorage.setItem("publsp-session",JSON.stringify(se)),console.log("Created new session:",se.sessionId),console.log("Session npub:",se.npub)}else throw new Error(`Failed to create session: ${k.status}`)}catch(k){console.error("Failed to initialize session:",k),u.set("Failed to initialize session: "+k.message)}}async function z(k){try{return await Yt.toDataURL(k,{width:200,margin:2,color:{dark:"#000000",light:"#ffffff"}})}catch(x){return console.error("QR code generation error:",x),""}}function $(){const k={"Content-Type":"application/json"};return N.sessionId&&(k["session-id"]=N.sessionId),N.npub&&(k.npub=N.npub),k}async function O(){a.set(!0),u.set("");try{const k=await fetch(`${B}/api/ads/list?refresh=true`,{headers:$()});if(!k.ok)throw new Error("Failed to fetch ads");const x=await k.json();n.set(x.ads||[])}catch(k){u.set("Failed to load LSP advertisements: "+k.message)}finally{a.set(!1)}}async function H(k){l.set(k),s.update(x=>({...x,d:k.d,lsp_balance_sat:Math.max(x.lsp_balance_sat,k.min_channel_balance_sat||1e5),channel_expiry_blocks:k.max_channel_expiry_blocks,required_channel_confirmations:0,funding_confirms_within_blocks:6})),w.set(2)}async function U(){var k,x;if(v){a.set(!0),u.set("");try{console.log("Sending order data:",_);const se=await fetch(`${B}/api/orders/create`,{method:"POST",headers:$(),body:JSON.stringify(_)});if(!se.ok){const de=await se.json();throw new Error(de.detail||"Failed to create order")}const F=await se.json();console.log("Order response received:",F),console.log("Payment object:",F.payment),console.log("Payment.bolt11:",(k=F.payment)==null?void 0:k.bolt11),r.set(F);let Z=null;F.payment&&F.payment.bolt11&&F.payment.bolt11.invoice?(Z=F.payment.bolt11.invoice,console.log("Found invoice in payment.bolt11.invoice:",Z)):F.payment&&F.payment.bolt11&&F.payment.bolt11.bolt11_invoice?(Z=F.payment.bolt11.bolt11_invoice,console.log("Found invoice in payment.bolt11.bolt11_invoice:",Z)):F.payment&&F.payment.bolt11_invoice?(Z=F.payment.bolt11_invoice,console.log("Found invoice in payment.bolt11_invoice:",Z)):F.bolt11_invoice?(Z=F.bolt11_invoice,console.log("Found invoice in bolt11_invoice:",Z)):F.payment&&F.payment.invoice&&(Z=F.payment.invoice,console.log("Found invoice in payment.invoice:",Z)),Z?(t(9,T=await z(Z)),console.log("Generated QR code for invoice")):(console.log("No invoice found in response"),console.log("Full payment.bolt11 object:",(x=F.payment)==null?void 0:x.bolt11)),w.set(3),setTimeout(()=>{console.log("Auto-starting channel monitoring after 3 seconds..."),M()},3e3)}catch(se){u.set("Failed to submit order: "+se.message)}finally{a.set(!1)}}}async function M(){if(D){console.log("Already listening for channels, skipping...");return}if(!N.initialized){console.log("Session not initialized, cannot start channel monitoring"),u.set("Session not initialized for channel monitoring");return}t(10,D=!0),console.log("Starting channel monitoring with session:",N.sessionId),console.log("Using headers:",$()),await Q()}async function Q(){console.log("Starting to listen for channel updates..."),console.log("Using session headers:",$());try{const k=await fetch(`${B}/api/channels/listen-status`,{headers:$()});if(!k.ok){console.error("Failed to start channel status stream:",k.status,k.statusText),t(10,D=!1),console.log("Stream failed, trying fallback polling..."),K();return}console.log("Channel status stream started successfully");const x=k.body.getReader(),se=new TextDecoder;let F="",Z=0,de=Date.now();const De=setInterval(()=>{if(Date.now()-de>3e4){console.log("Stream appears stalled, switching to polling..."),clearInterval(De),x.cancel(),K();return}},1e4);for(;;){const{value:Te,done:J}=await x.read();if(J){console.log("Channel status stream ended"),clearInterval(De),t(10,D=!1);break}de=Date.now();const pe=se.decode(Te,{stream:!0});console.log("Received raw data chunk:",pe.length,"bytes:",pe),F+=pe;let ce=0,oe=0,Ve=!1,we=!1;for(let ne=0;ne<F.length;ne++){const xe=F[ne];if(we){we=!1;continue}if(xe==="\\"){we=!0;continue}if(xe==='"'){Ve=!Ve;continue}if(!Ve){if(xe==="{")oe++;else if(xe==="}"&&(oe--,oe===0)){const ve=F.substring(ce,ne+1);console.log("Received channel update:",ve);try{const he=JSON.parse(ve);if(console.log("Parsed channel data:",he),i.set(he),he.channel_state&&(console.log("Channel state update:",he.channel_state),he.channel_state==="PENDING"&&y!==4&&(console.log("Channel PENDING received! Moving to step 4"),console.log("Current step before update:",y),setTimeout(()=>{w.set(4),console.log("Step updated to 4")},100)),he.channel_state==="OPEN")){console.log("Channel OPEN received! Ending stream"),clearInterval(De),t(10,D=!1);return}}catch{Z++,console.log(`Heartbeat ${Z}: ${ve}`)}ce=ne+1}}}F=F.substring(ce)}}catch(k){console.error("Channel status stream error:",k),u.set("Failed to listen for channel updates: "+k.message),t(10,D=!1),console.log("Stream error, trying fallback polling..."),K()}}let q=null;async function K(){q||(console.log("Starting channel status polling..."),q=setInterval(async()=>{try{const k=await fetch(`${B}/api/channels/status`,{headers:$()});if(k.ok){const x=await k.json();console.log("Polled channel status:",x),i.set(x),x.channel_state==="OPEN"&&(console.log("Channel opened via polling! Moving to step 4"),w.set(4),clearInterval(q),q=null,t(10,D=!1))}}catch(k){console.error("Polling error:",k)}},5e3))}function ue(){return _.lsp_balance_sat+_.client_balance_sat}function ae(){l.set(null),s.set({lsp_balance_sat:1e5,client_balance_sat:0,channel_expiry_blocks:13e3,target_pubkey_uri:"",required_channel_confirmations:0,funding_confirms_within_blocks:6,announce_channel:!0}),r.set(null),i.set(null),u.set(""),w.set(1),t(9,T=""),t(10,D=!1),q&&(clearInterval(q),q=null)}function te(){typeof localStorage<"u"&&localStorage.removeItem("publsp-session"),f.set({sessionId:null,npub:null,initialized:!1}),ae(),Y()}const Le=k=>H(k);function le(){_.lsp_balance_sat=hn(this.value),t(2,_)}function fe(){_.client_balance_sat=hn(this.value),t(2,_)}function Re(){_.target_pubkey_uri=this.value,t(2,_)}function Ae(){_.announce_channel=this.checked,t(2,_)}return[d,v,_,I,E,b,C,y,N,T,D,O,H,U,M,ue,ae,te,Le,le,fe,Re,Ae,k=>Lo(k)]}class Fo extends rt{constructor(e){super(),it(this,e,Ro,$o,nt,{},null,[-1,-1])}}export{Fo as component};
